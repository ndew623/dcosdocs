<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Limitations - D2iQ Docs</title><meta name="description" content="Some limitations of the DC/OS Elastic service"><link rel="apple-touch-icon" sizes="180x180" href="/dcosdocs/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/dcosdocs/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/dcosdocs/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/dcosdocs/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/dcosdocs/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/dcosdocs/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>Elastic Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="spherer"><div class="chooser-current"><a class="chooser-title">Mesosphere</a><svg class="chooser-svg" id="spherer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="spherer-list"><li class="chooser-list-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li></ul></div><div class="chooser" id="ks"><div class="chooser-current"><a class="chooser-title">DKP</a><svg class="chooser-svg" id="kspherer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="kspherer-list"><li class="chooser-list-item"><a href="/dkp/konvoy">Konvoy</a></li><li class="chooser-list-item"><a href="/dkp/konvoy/partner-solutions">Partner Solutions</a></li><li class="chooser-list-item"><a href="/dkp/kommander">Kommander</a></li><li class="chooser-list-item"><a href="/dkp/dispatch">Dispatch</a></li><li class="chooser-list-item"><a href="/dkp/kaptain">Kaptain</a></li></ul></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/services">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS Services"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/konvoy/partner-solutions">Partner Solutions</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/limitations">Elastic 3.2.0-7.9.3</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/elastic/3.1.2-7.6.0/limitations">Elastic 3.1.2-7.6.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/elastic/2.7.0-6.8.1/limitations">Elastic 2.7.0-6.8.1</a></li></ul><div class="toggle"><p><span class="title">Elastic</span><span class="version"> 3.2.0-7.9.3</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/release-notes/">Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/getting-started/">Getting Started</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/configuration/">Configuration</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/operations/"><i data-feather="chevron-right"></i>Operations</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/updates/">Updates</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/security/">Security</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/uninstall/">Uninstall</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/troubleshooting/">Troubleshooting</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/advanced/">Advanced</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/api-reference/">API Reference</a></li><li class="active active-on"><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/limitations/">Limitations</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/support-policy/">Support Policy</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/how-to-guides/"><i data-feather="chevron-right"></i>How-To Guides</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2021 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Limitations</h1></div><h4 class="content__header-description">Some limitations of the DC/OS Elastic service</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/limitations/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li><li class="actions__item"><a class="actions__link" href="https://jira.d2iq.com/secure/CreateIssueDetails!init.jspa?pid=14105&amp;issuetype=1&amp;summary=Feedback+for+Limitations&amp;description=Source:%20https://docs.d2iq.com/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/limitations&amp;labels=documentation&amp;labels=needs_triage&amp;components=19804&amp;priority=3&amp;customfield_12300=44" target="_blank"><i class="actions__icon" data-feather="message-square"></i><span class="actions__text">Feedback</span></a></li></ul></div></div><article class="content__article"><h2 id="configuration-via-elasticsearchyml-andor-elastic-apis"><a class="content__anchor" href="#configuration-via-elasticsearchyml-andor-elastic-apis" aria-hidden="true"><i data-feather="bookmark"></i></a>Configuration via elasticsearch.yml and/or Elastic APIs</h2>
<p>Elasticsearch provides two ways of updating settings: persistent (through <code>elasticsearch.yml</code> file) and transient (through <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html">Elasticsearch Cluster Update Settings API</a>). The service’s Configuration Options are carried over to the tasks’ <code>elasticsearch.yml</code> file automatically. Out-of-band configuration changes (either via Elasticsearch’s Cluster Update Settings API or externally modifying <code>elasticsearch.yml</code> files) will not persist in case of a restart, failure recovery, or upgrade.</p>
<h2 id="kibana-service-url-does-not-work-on-dcos-111"><a class="content__anchor" href="#kibana-service-url-does-not-work-on-dcos-111" aria-hidden="true"><i data-feather="bookmark"></i></a>Kibana service URL does not work on DC/OS 1.11</h2>
<p>If Kibana is configured with <code>kibana.elasticsearch_xpack_security_enabled</code> set to <code>true</code> the default DC/OS service link (<code>https://&lt;cluster-url&gt;/service/&lt;kibana-service-name&gt;</code>) will not work. This is due to a change in how Kibana deals with <code>Authorization</code> HTTP headers starting in version 6.3.</p>
<p>As a workaround, you should be able to expose Kibana using <a href="/dcosdocs/mesosphere/dcos/services/edge-lb/">EdgeLB</a> by following this guide: <a href="/dcosdocs/mesosphere/dcos/services/elastic/3.2.0-7.9.3/how-to-guides#expose-kibana-using-edgelb">Expose Kibana using EdgeLB</a>.</p>
<h2 id="out-of-band-configuration"><a class="content__anchor" href="#out-of-band-configuration" aria-hidden="true"><i data-feather="bookmark"></i></a>Out-of-band configuration</h2>
<p>Out-of-band configuration modifications are not supported. The service’s core responsibility is to deploy and maintain the service with a specified configuration. In order to do this, the service assumes that it has ownership of task configuration. If an end-user makes modifications to individual tasks through out-of-band configuration operations, the service will override those modifications at a later time. For example:</p>
<ul>
<li>If a task crashes, it will be restarted with the configuration known to the scheduler, not one modified out-of-band.</li>
<li>If a configuration update is initiated, all out-of-band modifications will be overwritten during the rolling update.</li>
</ul>
<h2 id="scaling"><a class="content__anchor" href="#scaling" aria-hidden="true"><i data-feather="bookmark"></i></a>Scaling</h2>
<p>To prevent accidental data loss, the service does not support reducing the number of pods.</p>
<h2 id="disk-changes"><a class="content__anchor" href="#disk-changes" aria-hidden="true"><i data-feather="bookmark"></i></a>Disk changes</h2>
<p>To prevent accidental data loss from reallocation, the service does not support changing volume requirements after initial deployment.</p>
<h2 id="best-effort-installation"><a class="content__anchor" href="#best-effort-installation" aria-hidden="true"><i data-feather="bookmark"></i></a>Best-effort installation</h2>
<p>If your cluster does not have enough resources to deploy the service as requested, the initial deployment will not complete until either those resources are available or until you reinstall the service with corrected resource requirements. Similarly, scale-outs following initial deployment will not complete if the cluster does not have the needed available resources to complete the scale-out.</p>
<h2 id="virtual-networks"><a class="content__anchor" href="#virtual-networks" aria-hidden="true"><i data-feather="bookmark"></i></a>Virtual networks</h2>
<p>When the service is deployed on a virtual network, the service may not be switched to host networking without a full re-installation. The same is true for attempting to switch from host to virtual networking.</p>
<h2 id="task-environment-variables"><a class="content__anchor" href="#task-environment-variables" aria-hidden="true"><i data-feather="bookmark"></i></a>Task Environment Variables</h2>
<p>Each service task has some number of environment variables, which are used to configure the task. These environment variables are set by the service scheduler. While it is <em>possible</em> to use these environment variables in adhoc scripts (e.g. via <code>dcos task exec</code>), the name of a given environment variable may change between versions of a service and should not be considered a public API of the service.</p>
<h2 id="zones"><a class="content__anchor" href="#zones" aria-hidden="true"><i data-feather="bookmark"></i></a>Zones</h2>
<p>If the service is deployed with a Zone constraint it may not be removed after initial installation.</p>
<p>Additionally, if the service was deployed without a Zone constraint, it may not have one added after initial installation.</p>
<h2 id="regions"><a class="content__anchor" href="#regions" aria-hidden="true"><i data-feather="bookmark"></i></a>Regions</h2>
<p>The service cannot be moved between regions. It is also not possible to update the service to use a region if initially installed without one.</p>
<h2 id="upgrades-and-configuration-updates"><a class="content__anchor" href="#upgrades-and-configuration-updates" aria-hidden="true"><i data-feather="bookmark"></i></a>Upgrades and Configuration Updates</h2>
<p>Upgrades and rolling configuration updates do not wait for a cluster green health status. During deployment and upgrades, the <code>serial</code> strategy does not wait for the Elasticsearch cluster to reach green health before proceeding to the next node.</p>
<h2 id="security"><a class="content__anchor" href="#security" aria-hidden="true"><i data-feather="bookmark"></i></a>Security</h2>
<p>Elasticsearch’s built-in authentication mechanisms (<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/realms.html">realms</a>) cannot currently be configured through service configuration options (that is, on package installs or service updates). However, since the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.6/configuring-native-realm.html">native</a> realm is enabled by default by Elasticsearch, it is possible to configure it through the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.6/security-api.html">security APIs</a>. These APIs include both authentication and authorization mechanisms.</p>
<h3 id="transport-encryption"><a class="content__anchor" href="#transport-encryption" aria-hidden="true"><i data-feather="bookmark"></i></a>Transport Encryption</h3>
<p>Toggling Transport Encryption requires doing a full-cluster restart. This is an <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-tls.html">Elasticsearch limitation</a>. The service’s default update strategy is a rolling upgrade (<code>serial</code>). If you change its configuration to enable or disable transport encryption, nodes that have been configured with TLS will be unable to communicate with nodes configured with unencrypted networking, and vice-versa. A full-cluster restart is required, using the <code>parallel</code> update strategy. Make sure you have backups, and plan for some downtime. Afterwards, you should set the update strategy back to <code>serial</code> for future updates.</p>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h2"><a href="#configuration-via-elasticsearchyml-andor-elastic-apis">Configuration via elasticsearch.yml and/or Elastic APIs</a></li><li class="content__sections-item content__sections-item--h2"><a href="#kibana-service-url-does-not-work-on-dcos-111">Kibana service URL does not work on DC/OS 1.11</a></li><li class="content__sections-item content__sections-item--h2"><a href="#out-of-band-configuration">Out-of-band configuration</a></li><li class="content__sections-item content__sections-item--h2"><a href="#scaling">Scaling</a></li><li class="content__sections-item content__sections-item--h2"><a href="#disk-changes">Disk changes</a></li><li class="content__sections-item content__sections-item--h2"><a href="#best-effort-installation">Best-effort installation</a></li><li class="content__sections-item content__sections-item--h2"><a href="#virtual-networks">Virtual networks</a></li><li class="content__sections-item content__sections-item--h2"><a href="#task-environment-variables">Task Environment Variables</a></li><li class="content__sections-item content__sections-item--h2"><a href="#zones">Zones</a></li><li class="content__sections-item content__sections-item--h2"><a href="#regions">Regions</a></li><li class="content__sections-item content__sections-item--h2"><a href="#upgrades-and-configuration-updates">Upgrades and Configuration Updates</a></li><li class="content__sections-item content__sections-item--h2"><a href="#security">Security</a></li></ul></div></aside></main></div></div><script src="/dcosdocs/assets/js/jquery-3.2.1.js"></script><script src="/dcosdocs/assets/js/clipboard.js"></script><script src="/dcosdocs/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>