<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Running DC/OS on Packet - D2iQ Docs</title><meta name="description" content="Install DC/OS cluster on Packet bare metal using Terraform"><link rel="apple-touch-icon" sizes="180x180" href="/dcosdocs/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/dcosdocs/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/dcosdocs/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/dcosdocs/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/dcosdocs/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/dcosdocs/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>DC/OS Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header__menu-item"><a href="/dcosdocs/mesosphere/dcos/services">Services</a></li><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/2.1/installing/evaluation">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS 2.1"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/2.2/installing/evaluation/universal-installer-0.2/community-supported-methods/packet">Mesosphere DC/OS 2.2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.2/community-supported-methods/packet">Mesosphere DC/OS 2.1.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.0/installing/evaluation">Mesosphere DC/OS 2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/1.13/installing/evaluation">Mesosphere DC/OS 1.13</a></li></ul><div class="toggle"><p><span class="title">DC/OS</span><span class="version"> 2.1</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/release-notes/"><i data-feather="chevron-right"></i>Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/overview/"><i data-feather="chevron-right"></i>Overview</a></li><li class="active"><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/installing/"><i data-feather="chevron-right"></i>Installing</a></li><ul><li class="active"><a class="d1" href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/"><i data-feather="chevron-right"></i>Cloud Installation</a></li><ul><li class="active"><a class="d2" href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.2/"><i data-feather="chevron-right"></i>Deprecated Universal Installer 0.2</a></li><ul><li><a class="d3" href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.2/aws/"><i data-feather="chevron-right"></i>AWS</a></li><li><a class="d3" href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.2/azure/"><i data-feather="chevron-right"></i>Azure</a></li><li><a class="d3" href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.2/gcp/"><i data-feather="chevron-right"></i>GCP</a></li><li class="active"><a class="d3" href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.2/community-supported-methods/"><i data-feather="chevron-right"></i>Other Installation methods</a></li><ul><li><a class="d4" href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.2/community-supported-methods/aws/"><i data-feather="chevron-right"></i>AWS</a></li><li><a class="d4" href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.2/community-supported-methods/azure/">Azure</a></li><li class="active active-on"><a class="d4" href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.2/community-supported-methods/packet/">Packet</a></li></ul></ul><li><a class="d2" href="/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.3/"><i data-feather="chevron-right"></i>Universal Installer 0.3</a></li></ul><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.1/installing/production/"><i data-feather="chevron-right"></i>On-Prem Installation</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.1/installing/installation-faq/">Frequently Asked Questions</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.1/installing/troubleshooting/">Troubleshooting</a></li></ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/gui/"><i data-feather="chevron-right"></i>GUI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/cli/"><i data-feather="chevron-right"></i>CLI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/administering-clusters/"><i data-feather="chevron-right"></i>Administering Clusters</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/networking/"><i data-feather="chevron-right"></i>Networking</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/security/"><i data-feather="chevron-right"></i>Security</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/storage/"><i data-feather="chevron-right"></i>Storage</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/metrics/"><i data-feather="chevron-right"></i>Metrics</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/monitoring/"><i data-feather="chevron-right"></i>Monitoring, Logging, and Debugging</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/multi-tenancy/"><i data-feather="chevron-right"></i>Multi-Tenancy for DC/OS Clusters</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/hybrid-cloud/"><i data-feather="chevron-right"></i>Hybrid Cloud</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/deploying-jobs/"><i data-feather="chevron-right"></i>Deploying Jobs</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/deploying-services/"><i data-feather="chevron-right"></i>Deploying Services and Pods</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/tutorials/"><i data-feather="chevron-right"></i>Tutorials</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/api/"><i data-feather="chevron-right"></i>API Reference</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.1/developing-services/"><i data-feather="chevron-right"></i>Developing DC/OS Services</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2022 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Running DC/OS on Packet</h1><p class="badge badge--content-header badge--oss">OPEN SOURCE</p></div><h4 class="content__header-description">Install DC/OS cluster on Packet bare metal using Terraform</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/2.1/installing/evaluation/universal-installer-0.2/community-supported-methods/packet/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li></ul></div></div><article class="content__article"><p class="message--warning"><strong>DISCLAIMER: </strong>This is a <a href="https://github.com/dcos/terraform-dcos/tree/master/gcp">community driven project</a> and not officially supported by Mesosphere. This installation method is used for fast demos and proofs of concept. This page explains how to install DC/OS cluster on Packet bare metal using Terraform templates. Terraform is intended for reference only and are not recommended for production use. Upgrades are not supported with the following installation methods.</p>
<p class="message--note"><strong>NOTE: </strong>Contact the <a href="https://groups.google.com/a/dcos.io/forum/#!forum/users">mailing list</a> or <a href="http://chat.dcos.io/?_ga=2.226911897.58407594.1533244861-1110201164.1520633201">Slack channel</a> for community support. </p>
<p>You can create a DC/OS cluster on Packet bare metal using Terraform. The included Terraform templates are configured to run Mesosphere DC/OS on Packet. Depending on the DC/OS services that you install, or the amount of computing power your workload needs, you might have to modify the templates to suit your needs. You can modify the Terraform templates, but Mesosphere cannot assist in troubleshooting. If you require support, you can email help@packet.net, visit the Packet IRC channel (#packethost on freenode) or consider <a href="https://mesosphere.com/">DC/OS Enterprise</a>.</p>
<h2 id="hardware"><a class="content__anchor" href="#hardware" aria-hidden="true"><i data-feather="bookmark"></i></a>Hardware</h2>
<ul>
<li>
<p>One, three or five Mesos master nodes in the admin zone</p>
</li>
<li>
<p>Four Mesos private agent nodes</p>
</li>
<li>
<p>One Mesos public agent node</p>
</li>
<li>
<p>Packet “Type 0” Server instances</p>
</li>
</ul>
<h1 id="create-a-dcos-cluster"><a class="content__anchor" href="#create-a-dcos-cluster" aria-hidden="true"><i data-feather="bookmark"></i></a>Create a DC/OS cluster</h1>
<h2 id="prerequisites"><a class="content__anchor" href="#prerequisites" aria-hidden="true"><i data-feather="bookmark"></i></a>Prerequisites</h2>
<ul>
<li>
<p><a href="https://help.packet.net/quick-start/api-integrations">Packet API Key</a></p>
</li>
<li>
<p><a href="https://help.packet.net/quick-start/api-integrations">Packet Project ID</a></p>
</li>
<li>
<p><a href="https://www.terraform.io/intro/getting-started/install.html">Terraform by Hashicorp</a></p>
</li>
</ul>
<h2 id="installing-dcos"><a class="content__anchor" href="#installing-dcos" aria-hidden="true"><i data-feather="bookmark"></i></a>Installing DC/OS</h2>
<p class="message--important"><strong>IMPORTANT: </strong>With this method, the network is open by default. Because of this, <a href="/dcosdocs/mesosphere/dcos/2.1/administering-clusters/securing-your-cluster/#network-security">network security</a> is a concern and should be addressed as soon as possible by the administrator.</p>
<ol>
<li>
<p>Download and install Terraform using the instructions on the link provided in the Prerequisites section.</p>
</li>
<li>
<p><a href="https://github.com/dcos/packet-terraform">Download the DC/OS Terraform manifests from GitHub</a> into a local  directory.</p>
<pre><code class="language-bash">git clone https://github.com/dcos/packet-terraform
</code></pre>
</li>
<li>
<p>From that directory, generate an ssh keypair:</p>
<pre><code class="language-bash">ssh-keygen -t rsa -f ./packet-key
</code></pre>
</li>
<li>
<p>Copy <code>sample.terraform.tfvars</code> to a new file named <code>terraform.tfvars</code>, and edit the new file, filling in the values as desired. The following are blank and if not filled in, you will be prompted by terraform when necessary:</p>
<ul>
<li>
<p><code>packet_api_key</code> - Your Packet API key</p>
</li>
<li>
<p><code>packet_project_id</code> - Packet Project ID</p>
</li>
<li>
<p><code>dcos_installer_url</code> - Where to get <a href="https://downloads.dcos.io/dcos/stable/dcos_generate_config.sh">DC/OS configuration file</a></p>
</li>
</ul>
<p>The following have default values and may be changed depending on your requirements:</p>
<ul>
<li>
<p><code>packet_facility</code> - Packet facility: [ewr1|sjc1|ams1]
ewr1 is New Jersey, ams1 is Amsterdam, sjc1 is San Jose - default sjc1</p>
</li>
<li>
<p><code>packet_agent_type</code> - Type of Packet Server to use for the DC/OS Agents: [<code>baremetal_0</code>|baremetal_1|baremetal_3]
Choose the Packet Server type to use for the DC/OS Private Agents - default <code>baremetal_0</code></p>
</li>
<li>
<p><code>packet_master_type</code> - Type of Packet Server to use for the DC/OS Master: [<code>baremetal_0</code>|baremetal_1|baremetal_3]
Choose the Packet Server type to use for the DC/OS Master Nodes - default <code>baremetal_0</code></p>
</li>
<li>
<p><code>packet_boot_type</code> - Type of Packet Server to use for the DC/OS Boot Node: [<code>baremetal_0</code>|baremetal_1|baremetal_3]
Choose the Packet Server type to use for the DC/OS Boot Server - default <code>baremetal_0</code></p>
</li>
<li>
<p><code>dcos_cluster_name</code> - the name of your DC/OS cluster - defaults to <code>packet-dcos</code></p>
</li>
<li>
<p><code>dcos_agent_count</code> - Number of private agents to deploy - defaults to four</p>
</li>
<li>
<p><code>dcos_public_agent_count</code> - Number of public agents to deploy - defaults to one</p>
</li>
<li>
<p><code>dcos_init_pubkey</code> - The path to your ssh public key created in step 4 - defaults to ./packet-key.pub</p>
</li>
<li>
<p><code>key_file_path</code> - The path to your ssh private key created in step 4 - defaults to ./packet-key</p>
</li>
</ul>
</li>
<li>
<p>Also from that same directory, run <code>terraform apply</code> which will deploy the servers into your project at Packet, and run the DC/OS installation routine. When it completes, you will see output similar to the following, but with the IP addresses assigned to your servers:</p>
<p><img src="/dcosdocs/mesosphere/dcos/2.1/img/packet_terraform_output.png" alt="terraform apply output"></p>
<p>Figure 1. “Terraform apply” output</p>
</li>
</ol>
<p>You may need to wait a few minutes from this point for all the DC/OS services to become active and the control panel available on the master node. After 15 or 20 minutes, see the <a href="/dcosdocs/mesosphere/dcos/2.1/installing/troubleshooting/">troubleshooting</a> documentation.</p>
<h1 id="launch-dcos"><a class="content__anchor" href="#launch-dcos" aria-hidden="true"><i data-feather="bookmark"></i></a>Launch DC/OS</h1>
<p>Launch the DC/OS web interface by entering the Mesos master IP address:</p>
<ol>
<li>
<p>Cut and paste the link provided by running <code>terraform apply</code>, or by running terraform output from the same directory, into your browser to open the DC/OS web interface. The interface runs on the standard HTTP port 80, so you do not need to specify a port number after the hostname.</p>
</li>
<li>
<p>Install the DC/OS Command-Line Interface (CLI). You can install the CLI to administer your DC/OS cluster. You can access the documentation at any time by clicking the cluster name in the upper-left side.</p>
<p><img src="/dcosdocs/mesosphere/dcos/2.1/img/install-cli-terminal.png" alt="install CLI"></p>
<p>Figure 2. Install DC/OS CLI screen</p>
</li>
</ol>
<h2 id="next-steps"><a class="content__anchor" href="#next-steps" aria-hidden="true"><i data-feather="bookmark"></i></a>Next steps</h2>
<ul>
<li>
<p>Adding and removing nodes:</p>
<ul>
<li>
<p>Run <code>terraform apply -var ‘dcos_agent_count=N’</code> to change the private agent count to the number specified. (<code>‘dcos_public_agent_count’</code> is also available).</p>
</li>
<li>
<p>Increasing node count is fast and safe.</p>
</li>
<li>
<p>We recommend against reducing the node count in production. Stateful DC/OS apps and services may suffer outages and failures if nodes are not put into maintenance mode, and their tasks rescheduled through their respective schedulers.</p>
</li>
</ul>
</li>
</ul>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h2"><a href="#hardware">Hardware</a></li><li class="content__sections-item content__sections-item--h1"><a href="#create-a-dcos-cluster">Create a DC/OS cluster</a></li><li class="content__sections-item content__sections-item--h2"><a href="#prerequisites">Prerequisites</a></li><li class="content__sections-item content__sections-item--h2"><a href="#installing-dcos">Installing DC/OS</a></li><li class="content__sections-item content__sections-item--h1"><a href="#launch-dcos">Launch DC/OS</a></li><li class="content__sections-item content__sections-item--h2"><a href="#next-steps">Next steps</a></li></ul></div></aside></main></div></div><script src="/dcosdocs/assets/js/jquery-3.2.1.js"></script><script src="/dcosdocs/assets/js/clipboard.js"></script><script src="/dcosdocs/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>