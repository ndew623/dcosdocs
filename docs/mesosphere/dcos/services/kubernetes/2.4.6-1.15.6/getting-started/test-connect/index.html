<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Testing Connections and Viewing the Kubernetes Dashboard - D2iQ Docs</title><meta name="description" content="Learn to test your connection to private Kubernetes clusters and view the Kubernetes dashboard."><link rel="apple-touch-icon" sizes="180x180" href="/dcosdocs/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/dcosdocs/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/dcosdocs/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/dcosdocs/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/dcosdocs/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/dcosdocs/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>Kubernetes Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/services/kubernetes">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS Services"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.8.0-1.19.2/getting-started/test-connect">Kubernetes 2.8.0-1.19.2</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.7.0-1.18.6/getting-started/test-connect">Kubernetes 2.7.0-1.18.6</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.6.1-1.17.8/getting-started/test-connect">Kubernetes 2.6.1-1.17.8</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.6.0-1.17.7/getting-started/test-connect">Kubernetes 2.6.0-1.17.7</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.5.0-1.16.9/getting-started/test-connect">Kubernetes 2.5.0-1.16.9</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.9-1.15.10/getting-started/test-connect">Kubernetes 2.4.9-1.15.10</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.8-1.15.10/getting-started/test-connect">Kubernetes 2.4.8-1.15.10</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.7-1.15.10/getting-started/test-connect">Kubernetes 2.4.7-1.15.10</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/getting-started/test-connect">Kubernetes 2.4.6-1.15.6</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.5-1.15.5/getting-started/test-connect">Kubernetes 2.4.5-1.15.5</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.4-1.15.4/getting-started/test-connect">Kubernetes 2.4.4-1.15.4</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.3-1.15.3/getting-started/test-connect">Kubernetes 2.4.3-1.15.3</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.2-1.15.3/getting-started/test-connect">Kubernetes 2.4.2-1.15.3</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.1-1.15.2/getting-started/test-connect">Kubernetes 2.4.1-1.15.2</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.10-1.15.10/getting-started/test-connect">Kubernetes 2.4.10-1.15.10</a></li></ul><div class="toggle"><p><span class="title">Kubernetes</span><span class="version"> 2.4.6-1.15.6</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/release-notes/">Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/overview/">Overview</a></li><li class="active"><a class="d0" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/getting-started/"><i data-feather="chevron-right"></i>Tutorial - Kubernetes on DC/OS Enterprise</a></li><ul><li><a class="d1" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/getting-started/setting-up/">Setting Up</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/getting-started/installing-mke/">Installing MKE</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/getting-started/creating-clusters/">Creating Kubernetes clusters using MKE</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/getting-started/config-edgelb-for-k8s/">Configuring Edge-LB</a></li><li class="active active-on"><a class="d1" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/getting-started/test-connect/">Testing Connections</a></li></ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/operations/"><i data-feather="chevron-right"></i>Operations</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/cli/">CLI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/limitations/">Limitations</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/changelog/">Changelog</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/supported-versions/">Supported Versions</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2022 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Testing Connections and Viewing the Kubernetes Dashboard</h1><p class="badge badge--content-header badge--enterprise">ENTERPRISE</p></div><h4 class="content__header-description">Learn to test your connection to private Kubernetes clusters and view the Kubernetes dashboard.</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/getting-started/test-connect/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li></ul></div></div><article class="content__article"><p>In this section, we will test our connections to our Kubernetes clusters one at a time and then lastly connect to the Kubernetes dashboard and view our Kubernetes clusters’ information. To test our connections we must ensure that the right ports are open, set our cluster’s context with the DC/OS Kubernetes service, get Kubernetes nodes’ information, and test with a simple NGINX deployment.</p>
<h2 id="check-that-port-6443-and-6444-are-open"><a class="content__anchor" href="#check-that-port-6443-and-6444-are-open" aria-hidden="true"><i data-feather="bookmark"></i></a>Check that Port <code>:6443</code> and <code>:6444</code> are open.</h2>
<p>Before attempting to connect <code>kubectl</code> to the MKE clusters, you will want to check to ensure that ports <code>:6443</code> and <code>:6444</code> are accessible by your local machine to the DC/OS Cluster. Closed ports <code>:6443</code> and <code>:6444</code> will cause <code>kubectl</code> commands to just hang. Typically, these settings are handled by your systems administrator. Or, if using a cloud provider such as AWS, these would be rules configured in your <strong>EC2–&gt;Security Groups</strong> tab.</p>
<h2 id="test-the-connection-to-kubernetes-cluster1-at-port-6443"><a class="content__anchor" href="#test-the-connection-to-kubernetes-cluster1-at-port-6443" aria-hidden="true"><i data-feather="bookmark"></i></a>Test the connection to <code>kubernetes-cluster1</code> at port <code>:6443</code></h2>
<ol>
<li>
<p><strong>First, configure your</strong> <code>context</code><strong> to</strong> <code>kubernetes-cluster1</code> <strong>at port </strong><code>:6443</code><strong>.</strong></p>
<p>If using Edge-LB Auto Pools, in your CLI, enter the following snippet:</p>
<pre><code class="language-bash">dcos kubernetes cluster kubeconfig \
    --insecure-skip-tls-verify \
    --context-name=kubernetes-cluster1 \
    --cluster-name=kubernetes-cluster1 \
    --apiserver-url=https://${EDGELB_PUBLIC_AGENT_IP}:6443/kubernetes-cluster1
</code></pre>
<p>If not using Edge-LB Auto Pools, enter the following snippet:</p>
<pre><code class="language-bash">dcos kubernetes cluster kubeconfig \
    --insecure-skip-tls-verify \
    --context-name=kubernetes-cluster1 \
    --cluster-name=kubernetes-cluster1 \
    --apiserver-url=https://${EDGELB_PUBLIC_AGENT_IP}:6443
</code></pre>
<p>which will configure DC/OS Kubernetes to connect to <code>kubernetes-cluster1</code> from the Kubernetes CLI, <code>kubectl</code>. The <code>EDGELB_PUBLIC_AGENT_IP</code> should still be cached in your terminal environment from the previous section, if not, make sure to insert the proper value.</p>
</li>
<li>
<p><strong>Next, get your Kubernetes nodes’ info for </strong><code>kubernetes-cluster1</code><strong>.</strong></p>
<p>In your CLI, enter:</p>
<pre><code class="language-bash">kubectl get nodes
</code></pre>
<p>to receive details regarding your the nodes of <code>kubernetes-cluster1</code>.</p>
 <!-- better validation here of this step:OUTPUT ^^ -->
<p>If you do not get an almost immediate response, check your firewall settings and ensure that you can communicate with your public agent node.</p>
</li>
</ol>
<ol>
<li>
<p><strong>Then, create a NGINX deployment on </strong><code>kubernetes-cluster1</code><strong>.</strong></p>
<p>Enter the following in your CLI:</p>
<pre><code class="language-bash">kubectl apply -f https://k8s.io/examples/application/deployment.yaml
</code></pre>
<p>to launch the deployment.</p>
</li>
<li>
<p><strong>View the NGINX deployment just launched.</strong></p>
<p>In your CLI, run:</p>
<pre><code class="language-bash">kubectl get deployments
</code></pre>
<p>The resulting output should look similar to the following:</p>
<pre><code class="language-bash">$ kubectl get deployments
NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   2         2         2            2           23s
</code></pre>
</li>
<li>
<p><strong>Lastly, delete the NGINX deployment to finish up this connection test for</strong> <code>kubernetes-cluster1</code><strong>.</strong></p>
<p>Run the following command in your CLI:</p>
<pre><code class="language-bash">kubectl delete deployment nginx-deployment
</code></pre>
<p>and the deployment will be deleted.</p>
</li>
</ol>
<h2 id="test-the-connection-to-kubernetes-cluster2"><a class="content__anchor" href="#test-the-connection-to-kubernetes-cluster2" aria-hidden="true"><i data-feather="bookmark"></i></a>Test the connection to <code>kubernetes-cluster2</code></h2>
<p>Now you will do the same to test <code>kubernetes</code></p>
<ol>
<li>
<p><strong>Connect the second Kubernetes cluster to the <code>kubeconfig</code> in order to send</strong> <code>kubectl</code> <strong>commands to it.</strong></p>
<p>If using Edge-LB Auto Pools, in your CLI, paste in the following, again, your <code>EDGELB_PUBLIC_AGENT_IP</code> should still be cached in your terminal environment from the previous section:</p>
<pre><code class="language-bash">dcos kubernetes cluster kubeconfig \
    --insecure-skip-tls-verify \
    --context-name=kubernetes-cluster2 \
    --cluster-name=kubernetes-cluster2 \
    --apiserver-url=https://${EDGELB_PUBLIC_AGENT_IP}:6443/kubernetes-cluster2
</code></pre>
<p>If not using Edge-LB Auto Pools, enter the following snippet:</p>
<pre><code class="language-bash">dcos kubernetes cluster kubeconfig \
    --insecure-skip-tls-verify \
    --context-name=kubernetes-cluster2 \
    --cluster-name=kubernetes-cluster2 \
    --apiserver-url=https://${EDGELB_PUBLIC_AGENT_IP}:6444
</code></pre>
<p>Your <code>kubectl</code> commands should now connect to <code>kubernetes-cluster2</code>.</p>
<p>Once the 2 contexts are configured, they will be saved in ~/.kube/config. To switch, you can either set the context generally:</p>
<pre><code class="language-bash">kubectl config use-context kubernetes-cluster2
</code></pre>
<p>Or use the flag <code>--context kubernetes-cluster1</code> in commands like so:</p>
<pre><code class="language-bash">kubectl get nodes --context kubernetes-cluster1
</code></pre>
</li>
<li>
<p><strong>As before for </strong><code>kubernetes-cluster1</code><strong>, get the nodes’ information for </strong><code>kubernetes-cluster2</code><strong>.</strong></p>
<p>In your CLI, enter:</p>
<pre><code class="language-bash">kubectl get nodes
</code></pre>
<p>and note that the output should show that you are now using <code>kubernetes-cluster2</code>, similar to the following:</p>
<pre><code class="language-bash">$ kubectl get nodes
NAME                                                      STATUS   ROLES    AGE    VERSION
kube-control-plane-0-instance.kubernetes-cluster2.mesos   Ready    master   145m   v1.15.6
kube-node-0-kubelet.kubernetes-cluster2.mesos             Ready    &lt;none&gt;   142m   v1.15.6
</code></pre>
</li>
<li>
<p><strong>Next, create a NGINX deployment on</strong> <code>kubernetes-cluster1</code><strong>:</strong></p>
<p>Enter the following in your CLI:</p>
<pre><code class="language-bash">kubectl apply -f https://k8s.io/examples/application/deployment.yaml
</code></pre>
<p>and the deployment will begin.</p>
</li>
<li>
<p><strong>View that NGINX deployment in action:</strong></p>
<pre><code class="language-bash">kubectl get deployments
</code></pre>
<p>The resulting output should look similar to below:</p>
<pre><code class="language-bash">$ kubectl get deployments
NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   2         2         2            2           23s
Delete NGINX deployment:
</code></pre>
</li>
<li>
<p><strong>Finally, delete your test deployment.</strong></p>
<p>Simply enter:</p>
<pre><code class="language-bash">kubectl delete deployment nginx-deployment
</code></pre>
<p>and the deployment will be shut down.</p>
</li>
</ol>
<h2 id="access-the-kubernetes-dashboard-from-your-browser"><a class="content__anchor" href="#access-the-kubernetes-dashboard-from-your-browser" aria-hidden="true"><i data-feather="bookmark"></i></a>Access the Kubernetes Dashboard from your browser</h2>
<p>In one simple but satisfying validation of our connection into our Kubernetes cluster manager from outside the cluster, we will access the Kubernetes Dashboard and view our cluster currently in context.</p>
<ol>
<li>
<p><strong> Access the Kubernetes dashboard.</strong></p>
<p>In your CLI, enter:</p>
<pre><code class="language-bash">kubectl proxy
</code></pre>
<p>which should start the proxy server.</p>
 <!-- better validation here of this step:OUTPUT ^^ -->
</li>
<li>
<p><strong>Then, navigate to:</strong>  <a href="http://127.0.0.1:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/">http://127.0.0.1:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/</a> and you should see your Kubernetes dashboard and information.</p>
</li>
</ol>
<p>When the Kubernetes login screen is shown, you should choose the <strong>Kubeconfig</strong> option, click the <strong>Choose kubeconfig file</strong> text box and pick the location of your kubeconfig file (typically, <code>$HOME/.kube/config</code>).</p>
<p><strong>Note:</strong> When accessed, and depending on whether you are running DC/OS or DC/OS EE (as well as on your browser’s configuration) you may be presented a warning indicating that the TLS certificate being used by the Kubernetes Dashboard is not trusted. It is generally safe to permanently trust this TLS certificate by adding an exception in your browser, or to skip past it. To learn more about TLS certificates, visit the <a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/operations/kubernetes-dashboard/">Kubernetes Dashboard</a> section.</p>
<h2 id="mission-complete"><a class="content__anchor" href="#mission-complete" aria-hidden="true"><i data-feather="bookmark"></i></a>Mission Complete!</h2>
<p>Well done! You have successfully completed the <a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/getting-started/">Getting Started Guide for Kubernetes</a>. You have set up your DC/OS Enterprise cluster to be able to run Kubernetes as a service on DC/OS.</p>
<p>For more information regarding operating Kubernetes as a service on DC/OS, check out the <a href="/dcosdocs/mesosphere/dcos/services/kubernetes/2.4.6-1.15.6/operations/">Operations</a> section.</p>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h2"><a href="#check-that-port-6443-and-6444-are-open">Check that Port :6443 and :6444 are open.</a></li><li class="content__sections-item content__sections-item--h2"><a href="#test-the-connection-to-kubernetes-cluster1-at-port-6443">Test the connection to kubernetes-cluster1 at port :6443</a></li><li class="content__sections-item content__sections-item--h2"><a href="#test-the-connection-to-kubernetes-cluster2">Test the connection to kubernetes-cluster2</a></li><li class="content__sections-item content__sections-item--h2"><a href="#access-the-kubernetes-dashboard-from-your-browser">Access the Kubernetes Dashboard from your browser</a></li><li class="content__sections-item content__sections-item--h2"><a href="#mission-complete">Mission Complete!</a></li></ul></div></aside></main></div></div><script src="/dcosdocs/assets/js/jquery-3.2.1.js"></script><script src="/dcosdocs/assets/js/clipboard.js"></script><script src="/dcosdocs/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>