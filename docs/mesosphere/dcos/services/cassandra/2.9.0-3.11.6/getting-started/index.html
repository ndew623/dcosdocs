<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Getting Started - D2iQ Docs</title><meta name="description" content="Getting started with Cassandra"><link rel="apple-touch-icon" sizes="180x180" href="/dcosdocs/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/dcosdocs/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/dcosdocs/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/dcosdocs/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/dcosdocs/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/dcosdocs/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>Cassandra Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/services/cassandra">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS Services"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/getting-started">Cassandra 2.9.0-3.11.6</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/cassandra/2.4.0-3.0.16/getting-started">Cassandra 2.4.0-3.0.16</a></li></ul><div class="toggle"><p><span class="title">Cassandra</span><span class="version"> 2.9.0-3.11.6</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/release-notes/">Release Notes</a></li><li class="active active-on"><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/getting-started/">Getting Started</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/operations/">Operations</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/configuration/">Configuring</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/advanced/">Advanced</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/updates/">Update</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/security/">Security</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/uninstall/">Uninstall</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/troubleshooting/">Troubleshooting</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/api-reference/">API Reference</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/limitations/">Limitations</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/support-policy/">Support Policy</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2022 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Getting Started</h1></div><h4 class="content__header-description">Getting started with Cassandra</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/getting-started/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li></ul></div></div><article class="content__article"><p>Getting started with a test instance of the DC/OS Apache Cassandra service is straightforward.</p>
<h2 id="prerequisites"><a class="content__anchor" href="#prerequisites" aria-hidden="true"><i data-feather="bookmark"></i></a>Prerequisites</h2>
<ul>
<li>Depending on your security mode in Enterprise DC/OS, you may need to <a href="/dcosdocs/mesosphere/dcos/services/cassandra/2.9.0-3.11.6/security/#provisioning-a-service-account">provision a service account</a> before installing. You will be able to create the service account only if you have a <code>superuser</code> permission.
<ul>
<li><code>strict</code> <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/#security-modes">security mode</a> requires a service account.</li>
<li><code>permissive</code> security mode a service account is optional.</li>
<li><code>disabled</code> security mode does not require a service account.</li>
</ul>
</li>
<li>Your cluster must have at least three private nodes.</li>
</ul>
<p class="message--note"><strong>NOTE: </strong>The default DC/OS Apache Cassandra installation provides reasonable defaults for trying out the service, but may not be sufficient for production use. You may require different configurations depending on the context of the deployment.</p>
<h2 id="installation-from-the-dcos-cli"><a class="content__anchor" href="#installation-from-the-dcos-cli" aria-hidden="true"><i data-feather="bookmark"></i></a>Installation from the DC/OS CLI</h2>
<p>To start a basic test cluster, run the following command on the DC/OS CLI. Enterprise DC/OS users must follow additional instructions. More information about installing DC/OS Apache Cassandra on Enterprise DC/OS is available in the <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/service-auth/custom-service-auth/">Authenticating DC/OS Services</a> documentation.</p>
<pre><code class="language-shell">dcos package install cassandra
</code></pre>
<p>You can specify a custom configuration in an <code>options.json</code> file and pass it to <code>dcos package install</code> using the <code>--options</code> parameter.</p>
<pre><code>dcos package install cassandra --options=&lt;options&gt;.json
</code></pre>
<p>It is recommended that this custom configuration is stored in source control.</p>
<p>For more information about building the <code>options.json</code> file, see the <a href="/dcosdocs/mesosphere/dcos/latest/deploying-services/config-universe-service/">DC/OS documentation</a> for service configuration access.</p>
<h2 id="installation-from-the-dcos-ui"><a class="content__anchor" href="#installation-from-the-dcos-ui" aria-hidden="true"><i data-feather="bookmark"></i></a>Installation from the DC/OS UI</h2>
<p>You can <a href="/dcosdocs/mesosphere/dcos/latest/deploying-services/install/">install DC/OS Apache Cassandra from the DC/OS UI</a>. If you install DC/OS Apache Cassandra from the web interface, you must install the DC/OS Apache Cassandra CLI subcommands separately. From the DC/OS CLI, enter the following command:</p>
<pre><code class="language-bash">dcos package install cassandra --cli
</code></pre>
<p>Choose <code>ADVANCED INSTALLATION</code> to perform a custom installation.</p>
<h2 id="integration-with-dcos-access-controls"><a class="content__anchor" href="#integration-with-dcos-access-controls" aria-hidden="true"><i data-feather="bookmark"></i></a>Integration with DC/OS access controls</h2>
<p>In Enterprise DC/OS 1.10 and later, you can integrate your SDK-based service with DC/OS ACLs to restrict users and groups only to certain services. You will install your service into a folder, and then restrict access to some number of folders. Folders also allow you to assign namespaces to services; for example, <code>staging/cassandra</code> and <code>production/cassandra</code>.</p>
<p>Use the following steps to integrate with DC/OS access controls:</p>
<ol>
<li>
<p>In the DC/OS UI, you must create a group and then add a user to the group or create an user. Click <strong>Organization</strong> &gt; <strong>Groups</strong> &gt; <strong>+</strong> or <strong>Organization</strong> &gt; <strong>Users</strong> &gt; <strong>+</strong>. If you create a group, you must also create a user and add them to the group.</p>
</li>
<li>
<p>Give the user permissions for the folder where you will install your service. In this example, we are creating a user called <code>developer</code>, who will have access to the <code>/testing</code> folder.
Select the group or user you created. Select <strong>ADD PERMISSION</strong> and then toggle to <strong>INSERT PERMISSION STRING</strong>. Add each of the following permissions to your user or group and then click <strong>ADD PERMISSIONS</strong>.</p>
<pre><code>dcos:adminrouter:service:marathon full
dcos:service:marathon:marathon:services:/testing full
dcos:adminrouter:ops:mesos full
dcos:adminrouter:ops:slave full
</code></pre>
</li>
<li>
<p>Install your service into a folder called <code>test</code>. Go to <strong>Catalog</strong>, then search for <strong>cassandra</strong>.</p>
</li>
<li>
<p>Click <strong>CONFIGURE</strong> and change the service name to <code>/testing/cassandra</code>, then deploy.</p>
<p>The slashes in your service name are interpreted as folders. You are deploying Cassandra in the <code>/testing</code> folder. Any user with access to the <code>/testing</code> folder will have access to the service.</p>
</li>
</ol>
<p class="message--note"><strong>NOTE: </strong>Services cannot be renamed because the location of the service is specified in the name and you cannot move services between folders. DC/OS 1.9 does not accept slashes in service names. You may be able to create the service, but you will encounter unexpected problems.</p>
<h3 id="interacting-with-your-foldered-service"><a class="content__anchor" href="#interacting-with-your-foldered-service" aria-hidden="true"><i data-feather="bookmark"></i></a>Interacting with your foldered service</h3>
<ul>
<li>Interact with your foldered service via the DC/OS CLI with this flag: <code>--name=/path/to/myservice</code>.</li>
<li>To interact with your foldered service over the web directly, use <code>http://&lt;dcos-url&gt;/service/path/to/myservice</code>. E.g., <code>http://&lt;dcos-url&gt;/service/testing/cassandra/v1/endpoints</code>.</li>
</ul>
<h1 id="multi-datacenter-deployment"><a class="content__anchor" href="#multi-datacenter-deployment" aria-hidden="true"><i data-feather="bookmark"></i></a>Multi-datacenter Deployment</h1>
<p>To replicate data across data centers, Apache Cassandra requires that you configure each cluster with the addresses of the seed nodes from every remote cluster. Use the following steps to learn how to start a multi-data center Apache Cassandra deployment running inside of a single DC/OS cluster.</p>
<h2 id="launch-two-cassandra-clusters"><a class="content__anchor" href="#launch-two-cassandra-clusters" aria-hidden="true"><i data-feather="bookmark"></i></a>Launch two Cassandra clusters</h2>
<p>Launch the first cluster with the default configuration using the following command:</p>
<pre><code class="language-shell">dcos package install cassandra
</code></pre>
<p>Create an <code>options.json</code> file for the second cluster that specifies a different service name and data center name.</p>
<pre><code class="language-json">{
  &quot;service&quot;: {
    &quot;name&quot;: &quot;cassandra2&quot;,
    &quot;data_center&quot;: &quot;dc2&quot;
  }
}
</code></pre>
<p>Launch the second cluster with these custom options.</p>
<pre><code>dcos package install cassandra --options=&lt;options&gt;.json
</code></pre>
<h2 id="get-the-seed-node-ip-addresses"><a class="content__anchor" href="#get-the-seed-node-ip-addresses" aria-hidden="true"><i data-feather="bookmark"></i></a>Get the seed node IP addresses</h2>
<p class="message--note"><strong>NOTE: </strong>If your Cassandra clusters are not on the same network, you must set up a proxying layer to route traffic.</p>
<p>Get the list of seed node addresses for the first cluster using the following command:</p>
<pre><code class="language-shell">dcos cassandra endpoints native-client
</code></pre>
<p>Alternatively, you can get this information from the scheduler HTTP API.</p>
<pre><code class="language-json">DCOS_AUTH_TOKEN=$(dcos config show core.dcos_acs_token)
DCOS_URL=$(dcos config show core.dcos_url)
curl -H &quot;authorization:token=$DCOS_AUTH_TOKEN&quot; $DCOS_URL/service/cassandra/v1/endpoints/native-client
</code></pre>
<p>The output is as follows:</p>
<pre><code>{
  &quot;address&quot;: [
    &quot;10.0.3.88:9042&quot;,
    &quot;10.0.0.162:9042&quot;,
    &quot;10.0.0.189:9042&quot;
  ],
  &quot;dns&quot;: [
    &quot;node-0-server.cassandra.autoip.dcos.thisdcos.directory:9042&quot;,
    &quot;node-1-server.cassandra.autoip.dcos.thisdcos.directory:9042&quot;,
    &quot;node-2-server.cassandra.autoip.dcos.thisdcos.directory:9042&quot;
  ]
}
</code></pre>
<p>Note the IP addresses in the <code>address</code> field.</p>
<p>Run the same command for your second Cassandra cluster and note the IP addresses in the <code>address</code> field:</p>
<pre><code>dcos cassandra endpoints native-client --name=cassandra2
</code></pre>
<h2 id="update-configuration-for-both-clusters"><a class="content__anchor" href="#update-configuration-for-both-clusters" aria-hidden="true"><i data-feather="bookmark"></i></a>Update configuration for both clusters</h2>
<p>Create an <code>options.json</code> file with the IP addresses of the first cluster (<code>cassandra</code>).</p>
<pre><code class="language-json">{
  &quot;service&quot;: {
    &quot;remote_seeds&quot;: &quot;10.0.3.88:9042,10.0.0.162:9042,10.0.0.189:9042&quot;
  }
}
{
  {}
}
</code></pre>
<p>Update the configuration of the second cluster.</p>
<pre><code>dcos cassandra update start --options=options.json --name=cassandra2
</code></pre>
<p>Perform the same operation on the first cluster, adding the IP addresses of the second cluster’s seed nodes to the <code>service.remote_seeds</code> field. Then, update the first cluster’s configuration: <code>dcos cassandra update start --options=options.json</code>.</p>
<p>Both schedulers will restart after the configuration update, and each cluster will communicate with the seed nodes from the other cluster to establish a multi-data center topology. Repeat this process for each new cluster you add.</p>
<p>You can monitor the progress of the update.</p>
<pre><code class="language-shell">dcos cassandra --name=cassandra update status
</code></pre>
<p>The output is as follows:</p>
<pre><code class="language-shell">deploy (IN_PROGRESS)
└─ node-deploy (IN_PROGRESS)
   ├─ node-0:[server] (COMPLETE)
   ├─ node-1:[server] (COMPLETE)
   └─ node-2:[server] (PREPARED)
</code></pre>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h2"><a href="#prerequisites">Prerequisites</a></li><li class="content__sections-item content__sections-item--h2"><a href="#installation-from-the-dcos-cli">Installation from the DC/OS CLI</a></li><li class="content__sections-item content__sections-item--h2"><a href="#installation-from-the-dcos-ui">Installation from the DC/OS UI</a></li><li class="content__sections-item content__sections-item--h2"><a href="#integration-with-dcos-access-controls">Integration with DC/OS access controls</a></li><li class="content__sections-item content__sections-item--h1"><a href="#multi-datacenter-deployment">Multi-datacenter Deployment</a></li><li class="content__sections-item content__sections-item--h2"><a href="#launch-two-cassandra-clusters">Launch two Cassandra clusters</a></li><li class="content__sections-item content__sections-item--h2"><a href="#get-the-seed-node-ip-addresses">Get the seed node IP addresses</a></li><li class="content__sections-item content__sections-item--h2"><a href="#update-configuration-for-both-clusters">Update configuration for both clusters</a></li></ul></div></aside></main></div></div><script src="/dcosdocs/assets/js/jquery-3.2.1.js"></script><script src="/dcosdocs/assets/js/clipboard.js"></script><script src="/dcosdocs/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>