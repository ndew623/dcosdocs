<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Security - D2iQ Docs</title><meta name="description" content="Configuring secure DC/OS service accounts"><link rel="apple-touch-icon" sizes="180x180" href="/dcosdocs/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/dcosdocs/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/dcosdocs/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/dcosdocs/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/dcosdocs/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/dcosdocs/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>Data Science Engine Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="spherer"><div class="chooser-current"><a class="chooser-title">Mesosphere</a><svg class="chooser-svg" id="spherer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="spherer-list"><li class="chooser-list-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li></ul></div><div class="chooser" id="ks"><div class="chooser-current"><a class="chooser-title">DKP</a><svg class="chooser-svg" id="kspherer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="kspherer-list"><li class="chooser-list-item"><a href="/dkp/konvoy">Konvoy</a></li><li class="chooser-list-item"><a href="/dkp/konvoy/partner-solutions">Partner Solutions</a></li><li class="chooser-list-item"><a href="/dkp/kommander">Kommander</a></li><li class="chooser-list-item"><a href="/dkp/dispatch">Dispatch</a></li><li class="chooser-list-item"><a href="/dkp/kaptain">Kaptain</a></li><li class="chooser-list-item"><a href="/dkp/conductor">Conductor</a></li></ul></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/services">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS Services"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/konvoy/partner-solutions">Partner Solutions</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__item"><a href="/dkp/conductor">Conductor</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/security">DC/OS Data Science Engine 2.1.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.0.1/security">DC/OS Data Science Engine 2.0.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.0.0/security">DC/OS Data Science Engine 2.0.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/data-science-engine/1.0.2/security">DC/OS Data Science Engine 1.0.2</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/data-science-engine/1.0.1/security">DC/OS Data Science Engine 1.0.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/data-science-engine/1.0.0/security">DC/OS Data Science Engine 1.0.0</a></li></ul><div class="toggle"><p><span class="title">Data Science Engine</span><span class="version"> 2.1.0</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/release-notes/">Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/overview/">Overview</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/quick-start/">Quick Start Guide</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/customizations/"><i data-feather="chevron-right"></i>Customizations</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/integrations/"><i data-feather="chevron-right"></i>Integrations</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/storage/"><i data-feather="chevron-right"></i>Storage</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/dynamic-allocation/">Dynamic Allocation</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/supported-kernels/">Supported Kernels</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/upgrade/">Upgrade</a></li><li class="active active-on"><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/security/"><i data-feather="chevron-right"></i>Security</a></li><ul><li><a class="d1" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/security/kerberos/">Kerberos</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/security/tls/">TLS</a></li></ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/uninstall/">Uninstall</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2021 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Security</h1><p class="badge badge--content-header badge--enterprise">ENTERPRISE</p></div><h4 class="content__header-description">Configuring secure DC/OS service accounts</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/security/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li><li class="actions__item"><a class="actions__link" href="https://jira.d2iq.com/secure/CreateIssueDetails!init.jspa?pid=14105&amp;issuetype=1&amp;summary=Feedback+for+Security&amp;description=Source:%20https://docs.d2iq.com/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/security&amp;labels=documentation&amp;labels=needs_triage&amp;components=19804&amp;priority=3&amp;customfield_12300=44" target="_blank"><i class="actions__icon" data-feather="message-square"></i><span class="actions__text">Feedback</span></a></li></ul></div></div><article class="content__article"><p>This guide describes how to configure secure DC/OS service accounts for DC/OS Data Science Engine.
When running in DC/OS strict security mode, both the DC/OS Data Science Engine and Spark applications launched from it must authenticate to Mesos using a DC/OS service account.</p>
<h1 id="provisioning-a-service-account"><a class="content__anchor" href="#provisioning-a-service-account" aria-hidden="true"><i data-feather="bookmark"></i></a><a name="provision-a-service-account"></a>Provisioning a service account</h1>
<p>This section describes how to configure DC/OS access for DC/OS Data Science Engine. Depending on your <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/#security-modes/">security mode</a>, DC/OS Data Science Engine may require <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/service-auth/">service authentication</a> for access to DC/OS.</p>
<table>
<thead>
<tr>
<th>Security mode</th>
<th>Service Account</th>
</tr>
</thead>
<tbody>
<tr>
<td>Disabled</td>
<td>Not available</td>
</tr>
<tr>
<td>Permissive</td>
<td>Optional</td>
</tr>
<tr>
<td>Strict</td>
<td>Required</td>
</tr>
</tbody>
</table>
<p>If you install a service in permissive mode and do not specify a service account, Metronome and Marathon will act as if requests made by this service are made by an account with the <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/perms-reference/#superuser-permissions">superuser permission</a>.</p>
<h2 id="prerequisites"><a class="content__anchor" href="#prerequisites" aria-hidden="true"><i data-feather="bookmark"></i></a>Prerequisites:</h2>
<ul>
<li><a href="/dcosdocs/mesosphere/dcos/latest/cli/install/">DC/OS CLI installed</a> and be logged in as a superuser.</li>
<li><a href="/dcosdocs/mesosphere/dcos/latest/cli/enterprise-cli/#ent-cli-install">Enterprise DC/OS CLI 0.4.14</a> or later installed.</li>
<li>If your <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/#security-modes/">security mode</a> is <code>permissive</code> or <code>strict</code>, you must <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/tls-ssl/get-cert/">get the root cert</a> before issuing the <code>curl</code> commands in this section.</li>
</ul>
<h1 id="create-a-key-pair"><a class="content__anchor" href="#create-a-key-pair" aria-hidden="true"><i data-feather="bookmark"></i></a><a name="create-a-keypair"></a>Create a Key Pair</h1>
<p>In this step, a 2048-bit RSA public-private key pair is created using the Enterprise DC/OS CLI.</p>
<p>Create a public-private key pair and save each value into a separate file within the current directory.</p>
<pre><code class="language-bash">dcos security org service-accounts keypair &lt;private-key&gt;.pem &lt;public-key&gt;.pem
</code></pre>
<p class="message--note"><strong>NOTE: </strong>You can use the <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/secrets/">DC/OS Secret Store</a> to secure the key pair.</p>
<h1 id="create-a-service-account"><a class="content__anchor" href="#create-a-service-account" aria-hidden="true"><i data-feather="bookmark"></i></a><a name="create-a-service-account"></a>Create a Service Account</h1>
<p>From a terminal prompt, create a new service account (for example, <code>data-science-engine</code>) containing the public key (<code>&lt;your-public-key&gt;.pem</code>).</p>
<pre><code class="language-bash">dcos security org service-accounts create -p &lt;your-public-key&gt;.pem -d &lt;description&gt; data-science-engine
</code></pre>
<p>You can verify your new service account using the following command.</p>
<pre><code class="language-bash">dcos security org service-accounts show data-science-engine
</code></pre>
<h1 id="create-a-secret"><a class="content__anchor" href="#create-a-secret" aria-hidden="true"><i data-feather="bookmark"></i></a><a name="create-an-sa-secret"></a>Create a Secret</h1>
<p>Create a secret (<code>data-science-engine/&lt;secret-name&gt;</code>) with your service account and private key specified (<code>&lt;private-key&gt;.pem</code>).</p>
<p class="message--note"><strong>NOTE: </strong>If you store your secret in a path that matches the service name, for example, service name and secret path are both <tt>data-science-engine</tt>, then only the service named <tt>data-science-engine</tt> can access it.</p>
<h2 id="permissive"><a class="content__anchor" href="#permissive" aria-hidden="true"><i data-feather="bookmark"></i></a>Permissive</h2>
<pre><code class="language-bash">dcos security secrets create-sa-secret &lt;private-key&gt;.pem &lt;service-account-id&gt; data-science-engine/&lt;secret-name&gt;
</code></pre>
<h2 id="strict"><a class="content__anchor" href="#strict" aria-hidden="true"><i data-feather="bookmark"></i></a>Strict</h2>
<pre><code class="language-bash">dcos security secrets create-sa-secret --strict &lt;private-key&gt;.pem &lt;service-account-id&gt; data-science-engine/&lt;secret-name&gt;
</code></pre>
<p>You can list the secrets with this command:</p>
<pre><code class="language-bash">dcos security secrets list /
</code></pre>
<h1 id="create-and-assign-permissions"><a class="content__anchor" href="#create-and-assign-permissions" aria-hidden="true"><i data-feather="bookmark"></i></a>Create and assign permissions</h1>
<p>In strict mode, any Spark applications launched by the DC/OS Data Science Engine will require additional permissions for authenticating with Mesos. This includes the launching of executors (worker tasks) on the cluster.</p>
<p class="message--note"><strong>NOTE: </strong> Spark applications launched by the DC&#x2F;OS Data Science Engine do not require an additional service account setup and will reuse the service account created for DC&#x2F;OS Data Science Engine with additional required permissions.</p>
<p>Use the following DC/OS CLI commands to rapidly provision a service account with the required permissions:</p>
<pre><code class="language-bash"># Allows the default user 'nobody' to execute tasks
dcos security org users grant &lt;service-account-id&gt; dcos:mesos:master:task:user:nobody create
dcos security org users grant &lt;service-account-id&gt; dcos:mesos:agent:task:user:nobody create

# Allows Spark framework to reserve cluster resources using &lt;service-account-id&gt; role and principal
dcos security org users grant &lt;service-account-id&gt; dcos:mesos:master:framework:role:&lt;service-account-id&gt; create
dcos security org users grant &lt;service-account-id&gt; dcos:mesos:master:reservation:role:&lt;service-account-id&gt; create
dcos security org users grant &lt;service-account-id&gt; dcos:mesos:master:reservation:principal:&lt;service-account-id&gt; delete
dcos security org users grant &lt;service-account-id&gt; dcos:mesos:master:volume:role:&lt;service-account-id&gt; create
dcos security org users grant &lt;service-account-id&gt; dcos:mesos:master:volume:principal:&lt;service-account-id&gt; delete

# Allows Spark framework to launch tasks using &lt;service-account-id&gt; role and principal
dcos security org users grant &lt;service-account-id&gt; dcos:mesos:master:task:role:&lt;service-account-id&gt; create
dcos security org users grant &lt;service-account-id&gt; dcos:mesos:master:task:principal:&lt;service-account-id&gt; create
dcos security org users grant &lt;service-account-id&gt; dcos:mesos:master:task:app_id:&lt;service-account-name&gt; create
</code></pre>
<p class="message--note"><strong>NOTE: </strong> The default service account name is <tt>data-science-engine</tt>. However, ensure that the <tt>&#60service-account-name&#62</tt> entered here is the same as the service name specified in the options.json or in the UI when DC&#x2F;OS Data Science Engine is installed.</p>
<!-- You can also provision a service account using the UI. -->
<p>To configure Spark for using created service account and permissions, add the following configuration under the <code>spark</code> section:</p>
<pre><code class="language-json">{
  &quot;service&quot;: {
      &quot;service_account&quot;: &quot;&lt;service-account-id&gt;&quot;,
      &quot;service_account_secret&quot;: &quot;&lt;service-account-secret&gt;&quot;,
  },
  &quot;spark&quot;: {
      &quot;spark_mesos_principal&quot;: &quot;&lt;service-account-id&gt;&quot;,
      &quot;spark_mesos_secret&quot;: &quot;&lt;service-account-secret&gt;&quot;,
      &quot;spark_mesos_role&quot;: &quot;&lt;service-account-id&gt;&quot;
  }
}
</code></pre>
<h2 id="using-the-secret-store"><a class="content__anchor" href="#using-the-secret-store" aria-hidden="true"><i data-feather="bookmark"></i></a>Using the secret store</h2>
<p>DC/OS Enterprise allows users to add privileged information in the form of a file to the <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/secrets/">DC/OS Secret Store</a>. These files can be referenced in DSEngine jobs and used for authentication and authorization with various external services (for example, HDFS). For example, you can use this functionality to pass Kerberos <code>keytab</code> files.</p>
<h3 id="where-to-place-secrets"><a class="content__anchor" href="#where-to-place-secrets" aria-hidden="true"><i data-feather="bookmark"></i></a>Where to place secrets</h3>
<p>For a secret to be available to DC/OS Data Science Engine, it must be placed in a path
that can be accessed by the DSEngine service. If only DSEngine requires access to a secret, you can store the secret in a path that matches the name of the DSEngine service (for example, <code>data-science-engine/secret</code>).</p>
<h2 id="limitations"><a class="content__anchor" href="#limitations" aria-hidden="true"><i data-feather="bookmark"></i></a>Limitations</h2>
<p>Anyone who has access to the DC/OS Data Science Engine’s notebook has access to all secrets available to it. Do not grant users access to the notebook unless they are also permitted to access its secrets.</p>
<h2 id="binary-secrets"><a class="content__anchor" href="#binary-secrets" aria-hidden="true"><i data-feather="bookmark"></i></a>Binary secrets</h2>
<p>You can store binary files, like a Kerberos keytab, in the DC/OS Secrets Store. In DC/OS 1.11 and later, you can create secrets from binary files directly.</p>
<p>To create a secret called <code>mysecret</code> with the binary contents of <code>kerb5.keytab</code>, run the following command:</p>
<pre><code class="language-bash">dcos security secrets create --file kerb5.keytab mysecret
</code></pre>
<p>In DC/OS 1.10 or earlier, files must be base64-encoded–as specified in RFC 4648–before being stored as secrets.</p>
<h1 id="using-mesos-secrets-in-spark-jobs"><a class="content__anchor" href="#using-mesos-secrets-in-spark-jobs" aria-hidden="true"><i data-feather="bookmark"></i></a>Using Mesos secrets in Spark jobs</h1>
<p>Once a secret has been added to the Secret Store, you can include it in the service’s configuration under the <code>security</code> section:</p>
<pre><code class="language-json">{
  &quot;service&quot;: {
      &quot;service_account&quot;: &quot;&lt;service-account-id&gt;&quot;,
      &quot;service_account_secret&quot;: &quot;&lt;service-account-secret&gt;&quot;,
  },
  &quot;security&quot;: {
    &quot;extra_spark_secrets&quot;: {
      &quot;secret_names&quot;: &quot;/data-science-engine/my-secret&quot;,
      &quot;secret_filenames&quot;: &quot;.secrets/my-secret&quot;,
	    &quot;secret_envkeys&quot;: &quot;MY_SECRET_ENV_VAR&quot;
    }
  }
}
</code></pre>
<p>Provided secrets will be automatically mounted to DC/OS Data Science Engine’s sandbox. The secrets will also be made available to all Spark executors by adding them to the following Spark configuration properties:
-<code>spark.mesos.executor.secret.names</code>
-<code>spark.mesos.executor.secret.&lt;filenames|envkeys&gt;</code></p>
<p class="message--note"><strong>NOTE: </strong> It is mandatory to provide values for <tt>service_account</tt> and <tt>service_account_secret</tt> in the service configuration in order to access any secrets.</p>
<h1 id="limitations-2"><a class="content__anchor" href="#limitations-2" aria-hidden="true"><i data-feather="bookmark"></i></a>Limitations</h1>
<p>When using environment variables and file-based secrets, there must be an equal number of sinks and secret sources. That is, the keys <code>secret_names</code>, <code>secret_filenames</code>, and <code>secret_envkeys</code> must have the same number of values. For example:</p>
<pre><code class="language-json">{
  &quot;service&quot;: {
      &quot;service_account&quot;: &quot;&lt;service-account-id&gt;&quot;,
      &quot;service_account_secret&quot;: &quot;&lt;service-account-secret&gt;&quot;,
  },
  &quot;security&quot;: {
    &quot;extra_spark_secrets&quot;: {
      &quot;secret_names&quot;: &quot;/data-science-engine/my-secret-file,/data-science-engine/my-secret-envvar&quot;,
      &quot;secret_filenames&quot;: &quot;target-secret-file,placeholder-file&quot;,
      &quot;secret_envkeys&quot;: &quot;PLACEHOLDER,SECRET_ENVVAR&quot;
    }
  }
}
</code></pre>
<p class="message--note"><strong>NOTE: </strong> It is mandatory to provide values for <tt>service_account</tt> and <tt>service_account_secret</tt> in the service configuration in order to access any secrets.</p>
<p>This configuration places the contents of <code>data-science-engine/my-secret-file</code> into the <code>target-secret-file</code> as well as the <code>PLACEHOLDER</code> environment variable. Additionally, the contents of <code>data-science-engine/my-secret-envvar</code> are exported to the <code>SECRET_ENVVAR</code> and written to the <code>placeholder-file</code>.</p>
<p class="message--note"><strong>NOTE: </strong> If the content size of binary secrets is greater than 4KB, Mesos' security module will reject container execution due to the overhead.</p>
<h1 id="authenticating-to-your-dcos-data-science-engine-instance"><a class="content__anchor" href="#authenticating-to-your-dcos-data-science-engine-instance" aria-hidden="true"><i data-feather="bookmark"></i></a>Authenticating to your DC/OS Data Science Engine instance</h1>
<p>You can run multiple installations of DC/OS Data Science Engine by changing the <code>service.name</code> option during installation.
Each instance can have different authentication mechanisms configured.</p>
<h2 id="password-authentication-default"><a class="content__anchor" href="#password-authentication-default" aria-hidden="true"><i data-feather="bookmark"></i></a>Password Authentication (default)</h2>
<p>The default DC/OS Data Science Engine password is set to<code>jupyter</code>. You can override it with the <code>service.jupyter_password</code> option.</p>
<h2 id="openid-connect"><a class="content__anchor" href="#openid-connect" aria-hidden="true"><i data-feather="bookmark"></i></a>OpenID Connect</h2>
<p>You can choose to enable OpenID Connect authentication. The OpenID Connect flow will be triggered if <code>oidc.enabled</code> is
<code>true</code> and both <code>oidc.discovery_uri</code> and <code>oidc.client_secret</code> are set, since they are the minimal options.</p>
<p>The default client name is <code>notebook</code> and it can be overridden with the <code>oidc.client_id</code> option.</p>
<p>Here is an example of a simple OpenID Connect configuration for DC/OS Data Science Engine:</p>
<pre><code class="language-json">{
  &quot;service&quot;: {
      &quot;service_account&quot;: &quot;&lt;service-account-id&gt;&quot;,
      &quot;service_account_secret&quot;: &quot;&lt;service-account-secret&gt;&quot;,
  },
  &quot;oidc&quot;: {
      &quot;enabled&quot;: true,
      &quot;discovery_uri&quot;: &quot;https://keycloak.example.com/auth/realms/notebook/.well-known/openid-configuration&quot;,
      &quot;client_id&quot;: &quot;data-science-engine-client&quot;,
      &quot;client_secret&quot;: &quot;11111111-2222-3333-4444-555555555555&quot;
  }
}
</code></pre>
<p class="message--note"><strong>NOTE: </strong> It is mandatory to provide values for <tt>service_account</tt> and <tt>service_account_secret</tt> in the service configuration in order to access any secrets.</p>
<!-- There are a few more options for advanced OpenID Connect configuration, that can be found in the `Oidc` section when
installing DC&#x2F;OS Data Science Engine from the catalog in the DC/OS UI.  -->
<h1 id="using-arbitrary-secrets"><a class="content__anchor" href="#using-arbitrary-secrets" aria-hidden="true"><i data-feather="bookmark"></i></a>Using Arbitrary Secrets</h1>
<p>This feature only works for Apache Toree kernel. To know more click <a href="https://toree.incubator.apache.org/docs/current/user/faq/">here</a>.</p>
<p>Suppose you want to use credentials for private repositories. First of all, create a credential property file with following content:</p>
<pre><code class="language-properties">user = username
pwd = password
host = repository.com
</code></pre>
<p>You can use this credential file in apache toree notebook by using <code>%AddDeps</code> magic as follows:</p>
<pre><code class="language-code">%AddDeps org.name artifact version --credential /path/to/credentials.prop --repository https://repository.com/artifactory/example-repo-local/
</code></pre>
<p>In order to see all the configuration parameters of <code>%AddDeps</code> magic, you should run <code>%AddDeps</code> without any arguments or flag.</p>
<div class="grid"><a class="grid__item" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/security/kerberos"><div class="grid__header__wrapper"><h3 class="grid__header">Kerberos</h3><div class="grid__label__wrapper"><h6 class="grid__label grid__label--enterprise">ENTERPRISE</h6></div></div><div class="grid__desc__wrapper"><p class="grid__desc">Using Kerberos with DC/OS Data Science Engine to retrieve and write data securely<span class="grid__desc__ellipsis">&#8230;Read More</span></p></div><div class="grid__link"><i data-feather="arrow-right"></i></div></a><a class="grid__item" href="/dcosdocs/mesosphere/dcos/services/data-science-engine/2.1.0/security/tls"><div class="grid__header__wrapper"><h3 class="grid__header">TLS</h3><div class="grid__label__wrapper"><h6 class="grid__label grid__label--enterprise">ENTERPRISE</h6></div></div><div class="grid__desc__wrapper"><p class="grid__desc">Using TLS to encrypt channels for greater security<span class="grid__desc__ellipsis">&#8230;Read More</span></p></div><div class="grid__link"><i data-feather="arrow-right"></i></div></a></div></article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h1"><a href="#provisioning-a-service-account">Provisioning a service account</a></li><li class="content__sections-item content__sections-item--h2"><a href="#prerequisites">Prerequisites:</a></li><li class="content__sections-item content__sections-item--h1"><a href="#create-a-key-pair">Create a Key Pair</a></li><li class="content__sections-item content__sections-item--h1"><a href="#create-a-service-account">Create a Service Account</a></li><li class="content__sections-item content__sections-item--h1"><a href="#create-a-secret">Create a Secret</a></li><li class="content__sections-item content__sections-item--h2"><a href="#permissive">Permissive</a></li><li class="content__sections-item content__sections-item--h2"><a href="#strict">Strict</a></li><li class="content__sections-item content__sections-item--h1"><a href="#create-and-assign-permissions">Create and assign permissions</a></li><li class="content__sections-item content__sections-item--h2"><a href="#using-the-secret-store">Using the secret store</a></li><li class="content__sections-item content__sections-item--h2"><a href="#limitations">Limitations</a></li><li class="content__sections-item content__sections-item--h2"><a href="#binary-secrets">Binary secrets</a></li><li class="content__sections-item content__sections-item--h1"><a href="#using-mesos-secrets-in-spark-jobs">Using Mesos secrets in Spark jobs</a></li><li class="content__sections-item content__sections-item--h1"><a href="#limitations-2">Limitations</a></li><li class="content__sections-item content__sections-item--h1"><a href="#authenticating-to-your-dcos-data-science-engine-instance">Authenticating to your DC/OS Data Science Engine instance</a></li><li class="content__sections-item content__sections-item--h2"><a href="#password-authentication-default">Password Authentication (default)</a></li><li class="content__sections-item content__sections-item--h2"><a href="#openid-connect">OpenID Connect</a></li><li class="content__sections-item content__sections-item--h1"><a href="#using-arbitrary-secrets">Using Arbitrary Secrets</a></li></ul></div></aside></main></div></div><script src="/dcosdocs/assets/js/jquery-3.2.1.js"></script><script src="/dcosdocs/assets/js/clipboard.js"></script><script src="/dcosdocs/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>