<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Provisioning Jenkins for DC/OS - D2iQ Docs</title><meta name="description" content="This topic describes when and how to provision Jenkins with a service account."><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>Jenkins Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/services">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS Services"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/3.6.1-2.190.1/jenkins-auth">Jenkins 3.6.1-2.190.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/3.6.0-2.190.1/jenkins-auth">Jenkins 3.6.0-2.190.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.4-2.150.1/jenkins-auth">Jenkins 3.5.4-2.150.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/jenkins-auth">Jenkins 3.5.3-2.150.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.2-2.107.2/jenkins-auth">Jenkins 3.5.2-2.107.2</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/jenkins-auth">Jenkins for DC/OS</a></li></ul><div class="toggle"><p><span class="title">Jenkins</span><span class="version"> 4.0.0-2.204.6</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/release-notes/">Jenkins for DC/OS Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/options-compatibility-matrix/">Configuration Options Matrix</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/quickstart/">Jenkins for DC/OS Quickstart</a></li><li class="active active-on"><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/jenkins-auth/">Provisioning Jenkins for DC/OS</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/custom-install/">Customizing your install</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/architecture/">Jenkins for DC/OS Service Architecture</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/uninstall/">Uninstalling</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2022 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Provisioning Jenkins for DC/OS</h1><p class="badge badge--content-header badge--enterprise">ENTERPRISE</p></div><h4 class="content__header-description">This topic describes when and how to provision Jenkins with a service account.</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/jenkins-auth/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li></ul></div></div><article class="content__article"><h1 id="about-provisioning-jenkins-with-a-service-account"><a class="content__anchor" href="#about-provisioning-jenkins-with-a-service-account" aria-hidden="true"><i data-feather="bookmark"></i></a>About provisioning Jenkins with a service account</h1>
<p>Whether you can or must provision Jenkins with a service account varies by <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/#security-modes">security mode</a>.</p>
<ul>
<li><code>permissive</code>: optional</li>
<li><code>strict</code>: required</li>
</ul>
<p>To increase the security of your cluster and conform to the principle of least privilege, we recommend provisioning Jenkins with a service account in <code>permissive</code> mode. Otherwise, Marathon and Metronome will act as if Jenkins was provisioned with a service account which has the <code>superuser</code> permission.</p>
<p>To set up a service account for Jenkins, complete the following steps.</p>
<ol>
<li><a href="#create-a-keypair">Create a key pair.</a></li>
<li><a href="#create-a-service-account">Create a service account.</a></li>
<li><a href="#create-an-sa-secret">Create a service account secret.</a></li>
<li><a href="#give-perms">Provision the service account with the necessary permissions.</a></li>
<li><a href="#create-json">Create a config.json file.</a></li>
</ol>
<p><strong>Requirement:</strong> In <code>strict</code> mode, the name of the service account must match the name that the service uses as its <code>principal</code>. By default, Jenkins uses <code>jenkins-principal</code> as the name of its <code>principal</code>. That’s the value that we use in the following procedures. Should you modify the default, you must change <code>jenkins-principal</code> throughout to match.</p>
<p><strong>Note:</strong> We will use <code>jenkins-secret</code> as the name of the secret, <code>jenkins-private-key.pem</code> as the name of the file containing the private key, and <code>jenkins-public-key.pem</code> as the name of the file containing the public key. We recommend using these names, as it will make it easier to copy and paste the commands. If you change the names, make sure to modify the commands before issuing them.</p>
<p><strong>Important:</strong> We store the secret in the <code>jenkins</code> path. This protects it from other services, so we do not recommend changing this.</p>
<h1 id="create-a-key-pair"><a class="content__anchor" href="#create-a-key-pair" aria-hidden="true"><i data-feather="bookmark"></i></a>Create a key pair</h1>
<p>First, you’ll need to generate a 2048-bit RSA public-private key pair. While you can use any tool to accomplish this, the Enterprise DC/OS CLI is the most convenient because it returns the keys in the exact format required.</p>
<p><strong>Prerequisite:</strong> You must have the <a href="/dcosdocs/mesosphere/dcos/latest/cli/install/">DC/OS CLI installed</a> and the <a href="/dcosdocs/mesosphere/dcos/latest/cli/enterprise-cli/#ent-cli-install">Enterprise DC/OS CLI installed</a>.</p>
<ol>
<li>
<p>Create a public-private key pair and save each value into a separate file within the current directory.</p>
<pre><code class="language-bash">dcos security org service-accounts keypair jenkins-private-key.pem jenkins-public-key.pem
</code></pre>
</li>
<li>
<p>Type <code>ls</code> to view the two new files created by the command. You may also want to open the files themselves and verify their contents.</p>
</li>
</ol>
<h1 id="create-a-service-account"><a class="content__anchor" href="#create-a-service-account" aria-hidden="true"><i data-feather="bookmark"></i></a>Create a service account</h1>
<h2 id="about-creating-a-service-account"><a class="content__anchor" href="#about-creating-a-service-account" aria-hidden="true"><i data-feather="bookmark"></i></a>About creating a service account</h2>
<p>Next, you must create a service account. This section uses the Enterprise DC/OS CLI to accomplish this.</p>
<p><strong>Prerequisite:</strong> You must have the <a href="/dcosdocs/mesosphere/dcos/latest/cli/install/">DC/OS CLI installed</a>, the <a href="/dcosdocs/mesosphere/dcos/latest/cli/enterprise-cli/#ent-cli-install">Enterprise DC/OS CLI installed</a>, and be logged in as a superuser via <code>dcos auth login</code>.</p>
<ul>
<li>
<p>Use the following command to create a new service account called <code>jenkins-principal</code> with the public key you just generated.</p>
<pre><code class="language-bash">dcos security org service-accounts create -p jenkins-public-key.pem -d &quot;Jenkins service account&quot; jenkins-principal
</code></pre>
</li>
<li>
<p>Verify your new service account using the following command.</p>
<pre><code class="language-bash">dcos security org service-accounts show jenkins-principal
</code></pre>
</li>
</ul>
<h2 id="about-creating-a-service-account-secret"><a class="content__anchor" href="#about-creating-a-service-account-secret" aria-hidden="true"><i data-feather="bookmark"></i></a>About creating a service account secret</h2>
<p>Next, you need to create a secret associated with the service account that contains the private key.</p>
<p><strong>Prerequisite:</strong> You must have the <a href="/dcosdocs/mesosphere/dcos/latest/cli/install/">DC/OS CLI installed</a>, the <a href="/dcosdocs/mesosphere/dcos/latest/cli/enterprise-cli/#ent-cli-install">Enterprise DC/OS CLI installed</a>, and be logged in as a superuser via <code>dcos auth login</code>.</p>
<ul>
<li>
<p>Depending on your security mode, use one of the following commands to create a new secret called <code>jenkins-secret</code> in the <code>jenkins</code> path. Locating the secret inside the <code>jenkins</code> path will ensure that only the Jenkins service can access it. The secret will contain the private key, the name of the service account, and other data.</p>
<p><strong>strict:</strong></p>
<pre><code class="language-bash">dcos security secrets create-sa-secret --strict jenkins-private-key.pem jenkins-principal jenkins-secret
</code></pre>
<p><strong>permissive:</strong></p>
<pre><code class="language-bash">dcos security secrets create-sa-secret jenkins-private-key.pem jenkins-principal jenkins-secret
</code></pre>
</li>
<li>
<p>Create a file based secret with the jenkins private key:</p>
<p><strong>Note:</strong> This step is required by the Jenkins master scheduler to authenticate with Mesos.</p>
<pre><code class="language-bash">dcos security secrets create -f ./jenkins-private-key.pem jenkins/private_key
</code></pre>
</li>
<li>
<p>Ensure the secret was created successfully:</p>
<pre><code class="language-bash">dcos security secrets list /
</code></pre>
</li>
<li>
<p><strong>Optional:</strong> Now that you have stored the private key in the Secret Store, we recommend deleting the private key file from your file system. This will prevent bad actors from using the private key to authenticate to DC/OS. Skip this step if you want to try out <a href="#Quota-enforced-Multi-Tenant-Jenkins">Quota Enforced Multi-Tenant Jenkins</a></p>
<pre><code class="language-bash">rm -rf jenkins-private-key.pem
</code></pre>
</li>
</ul>
<h1 id="provision-the-service-account-with-permissions"><a class="content__anchor" href="#provision-the-service-account-with-permissions" aria-hidden="true"><i data-feather="bookmark"></i></a>Provision the service account with permissions</h1>
<h2 id="about-the-permissions"><a class="content__anchor" href="#about-the-permissions" aria-hidden="true"><i data-feather="bookmark"></i></a>About the permissions</h2>
<p>The permissions needed vary according to your <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/#security-modes/">security mode</a>. In <code>permissive</code> mode, the Jenkins service account does not need any permissions. If you plan to upgrade at some point to <code>strict</code> mode, we recommending assigning them the permissions needed in <code>strict</code> mode to make the upgrade easier. The permissions will not have any effect until the cluster is in <code>strict</code> mode. If you plan to remain in <code>permissive</code> mode indefinitely, skip to <a href="#create-json">Create a config.json file</a>.</p>
<p>If you are in <code>strict</code> mode or want to be ready to upgrade to <code>strict</code> mode, continue to the next section.</p>
<h2 id="creating-and-assigning-the-permissions"><a class="content__anchor" href="#creating-and-assigning-the-permissions" aria-hidden="true"><i data-feather="bookmark"></i></a>Creating and assigning the permissions</h2>
<p>The DC/OS Enterprise CLI can be used to rapidly provision the Jenkins service account.  You must also log in via <code>dcos auth login</code> as a superuser.</p>
<p><strong>Note:</strong> Replace <code>nobody</code> with the appropriate user for your deployment.</p>
<pre><code class="language-bash">
 dcos security org users grant jenkins-principal dcos:mesos:master:framework:role:* read
 dcos security org users grant jenkins-principal dcos:mesos:master:framework:role:* create
 dcos security org users grant jenkins-principal dcos:mesos:master:reservation:role:* read
 dcos security org users grant jenkins-principal dcos:mesos:master:reservation:role:* create
 dcos security org users grant jenkins-principal dcos:mesos:master:volume:role:* read
 dcos security org users grant jenkins-principal dcos:mesos:master:volume:role:* create
 
 dcos security org users grant jenkins-principal dcos:mesos:master:task:user:nobody create
 dcos security org users grant jenkins-principal dcos:mesos:agent:task:user:nobody create

 dcos security org users grant jenkins-principal dcos:mesos:master:reservation:principal:jenkins-principal delete
 dcos security org users grant jenkins-principal dcos:mesos:master:volume:principal:jenkins-principal delete
</code></pre>
<h1 id="create-a-configjson-file"><a class="content__anchor" href="#create-a-configjson-file" aria-hidden="true"><i data-feather="bookmark"></i></a>Create a config.json file</h1>
<p>The contents of the <code>config.json</code> file will vary according to your security mode. We provide two examples below, one for each security mode. Locate the sample appropriate to your security mode, copy the JSON, paste it into a new file, and save it as <code>config.json</code>.</p>
<p><code>strict</code> <strong>mode</strong></p>
<pre><code class="language-json">{
  &quot;service&quot;: {
    &quot;name&quot;: &quot;jenkins&quot;,
    &quot;user&quot;: &quot;nobody&quot;,
    &quot;security&quot;: {
      &quot;service-account&quot;: &quot;jenkins-principal&quot;,
      &quot;secret-name&quot;: &quot;jenkins/private_key&quot;,
      &quot;strict-mode&quot;: true
    }
  }
}
</code></pre>
<p><code>permissive</code> <strong>mode</strong></p>
<pre><code class="language-json">{
  &quot;service&quot;: {
    &quot;name&quot;: &quot;jenkins&quot;,
    &quot;user&quot;: &quot;nobody&quot;,
    &quot;security&quot;: {
      &quot;service-account&quot;: &quot;jenkins-principal&quot;,
      &quot;secret-name&quot;: &quot;jenkins/private_key&quot;,
      &quot;strict-mode&quot;: false
    }
  }
}
</code></pre>
<p>If you have modified any of the values shown in the previous sections, change the values in the following JSON as appropriate.</p>
<h2 id="install-jenkins"><a class="content__anchor" href="#install-jenkins" aria-hidden="true"><i data-feather="bookmark"></i></a>Install Jenkins</h2>
<p>To install the service, complete the following command.</p>
<pre><code class="language-bash">dcos package install --options=config.json jenkins
</code></pre>
<hr>
<h1 id="quota-enforced-multi-tenant-jenkins"><a class="content__anchor" href="#quota-enforced-multi-tenant-jenkins" aria-hidden="true"><i data-feather="bookmark"></i></a>Quota enforced Multi-Tenant Jenkins</h1>
<p>The DC/OS Jenkins service starting with DC/OS 2.0 supports multi-tenancy. Users should familiarize themselves with <a href="/dcosdocs/mesosphere/dcos/latest/multi-tenancy/quota-management">Quota</a> and <a href="/dcosdocs/mesosphere/dcos/latest/multi-tenancy/resource-mgmt-primitives/">Resource Managment Primitives</a> in DC/OS.</p>
<p><strong>Note:</strong> We will use <code>/dev/jenkins</code> as the name of the service for the quota enabled multi-tenant examples below.</p>
<ul>
<li>DC/OS 2.0 and later clusters
<code>dev</code> will be the group in which the Jenkins service will be deployed as well as the <em>role</em> which the service will use. In <code>strict</code> mode, the service will require permissions granted for this <code>dev</code> role.</li>
<li>DC/OS 1.13 and older clusters
<code>dev</code> will be the group in which the Jenkins service will be deployed. The <em>role</em> used by the service can be configured with the default of <code>*</code>.  In <code>strict</code> mode, the service will require permissions granted for this <code>*</code> role.</li>
</ul>
<h3 id="role-used-by-jenkins-agents"><a class="content__anchor" href="#role-used-by-jenkins-agents" aria-hidden="true"><i data-feather="bookmark"></i></a>Role used by Jenkins Agents</h3>
<ul>
<li>DC/OS 2.0 and later clusters -
When quota is enforced on the group, the Jenkins agents will inherit the same role as the Jenkins master.</li>
<li>DC/OS 1.13 and older clusters -
The role used by the Jenkins agents can be configured via <code>service.roles.jenkins-agent-role</code> in the configuration options.</li>
</ul>
<h2 id="pre-requisites"><a class="content__anchor" href="#pre-requisites" aria-hidden="true"><i data-feather="bookmark"></i></a>Pre-requisites</h2>
<ol>
<li><a href="#Create-a-Key-Pair">Create a Key-Pair</a> if you haven’t already done so.</li>
<li><a href="#Create-a-service-account">Create a service account</a> if you haven’t already done so.</li>
</ol>
<h3 id="create-a-file-based-secret-with-the-jenkins-private-key"><a class="content__anchor" href="#create-a-file-based-secret-with-the-jenkins-private-key" aria-hidden="true"><i data-feather="bookmark"></i></a>Create a file based secret with the jenkins private key:</h3>
<p><strong>Note:</strong> This step is required by the Jenkins master scheduler to authenticate with Mesos.</p>
<p><strong>Note:</strong> This step creates a key for <code>dev/jenkins</code> service.</p>
<pre><code class="language-bash">dcos security secrets create -f ./jenkins-private-key.pem dev/jenkins/private_key
</code></pre>
<h2 id="creating-and-assigning-the-permissions-2"><a class="content__anchor" href="#creating-and-assigning-the-permissions-2" aria-hidden="true"><i data-feather="bookmark"></i></a>Creating and assigning the permissions</h2>
<p>The DC/OS Enterprise CLI can be used to rapidly provision the Jenkins service account.  You must also log in via <code>dcos auth login</code> as a superuser.</p>
<p><strong>Note:</strong> Replace <code>dev</code> &amp; <code>nobody</code> with the appropriate role and user for your deployment.</p>
<pre><code class="language-bash">
 dcos security org users grant jenkins-principal dcos:mesos:master:framework:role:dev read
 dcos security org users grant jenkins-principal dcos:mesos:master:framework:role:dev create
 dcos security org users grant jenkins-principal dcos:mesos:master:reservation:role:dev read
 dcos security org users grant jenkins-principal dcos:mesos:master:reservation:role:dev create
 dcos security org users grant jenkins-principal dcos:mesos:master:volume:role:dev read
 dcos security org users grant jenkins-principal dcos:mesos:master:volume:role:dev create
 
 dcos security org users grant jenkins-principal dcos:mesos:master:task:user:nobody create
 dcos security org users grant jenkins-principal dcos:mesos:agent:task:user:nobody create

 dcos security org users grant jenkins-principal dcos:mesos:master:reservation:principal:jenkins-principal delete
 dcos security org users grant jenkins-principal dcos:mesos:master:volume:principal:jenkins-principal delete
</code></pre>
<h1 id="create-a-configjson-file-2"><a class="content__anchor" href="#create-a-configjson-file-2" aria-hidden="true"><i data-feather="bookmark"></i></a>Create a config.json file</h1>
<p>The contents of the <code>config.json</code> file will vary according to your security mode. We provide two examples below, one for each security mode. Locate the sample appropriate to your security mode, copy the JSON, paste it into a new file, and save it as <code>config.json</code>.</p>
<ul>
<li><strong>Note</strong>: <code>roles.jenkins-master-role</code> must  match the quota role which is <code>dev</code> in this example.</li>
</ul>
<p><code>strict</code> <strong>mode</strong></p>
<pre><code class="language-json">{
  &quot;service&quot;: {
    &quot;name&quot;: &quot;dev/jenkins&quot;,
    &quot;user&quot;: &quot;nobody&quot;,
    &quot;roles&quot;: {
      &quot;jenkins-master-role&quot;: &quot;dev&quot;
    },
    &quot;security&quot;: {
      &quot;service-account&quot;: &quot;jenkins-principal&quot;,
      &quot;secret-name&quot;: &quot;dev/jenkins/private_key&quot;,
      &quot;strict-mode&quot;: true
    }
  }
}
</code></pre>
<p><code>permissive</code> <strong>mode</strong></p>
<pre><code class="language-json">{
  &quot;service&quot;: {
    &quot;name&quot;: &quot;dev/jenkins&quot;,
    &quot;user&quot;: &quot;nobody&quot;,
    &quot;roles&quot;: {
      &quot;jenkins-master-role&quot;: &quot;dev&quot;
    },
    &quot;security&quot;: {
      &quot;service-account&quot;: &quot;jenkins-principal&quot;,
      &quot;secret-name&quot;: &quot;dev/jenkins/private_key&quot;,
      &quot;strict-mode&quot;: false
    }
  }
}
</code></pre>
<h2 id="install-jenkins-2"><a class="content__anchor" href="#install-jenkins-2" aria-hidden="true"><i data-feather="bookmark"></i></a>Install Jenkins</h2>
<p>To install the service, complete the following command.</p>
<pre><code class="language-bash">dcos package install --options=config.json jenkins
</code></pre>
<p>Please see the <a href="/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/custom-install">Jenkins documentation</a> for more information about how to use the JSON file to install the service.</p>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h1"><a href="#about-provisioning-jenkins-with-a-service-account">About provisioning Jenkins with a service account</a></li><li class="content__sections-item content__sections-item--h1"><a href="#create-a-key-pair">Create a key pair</a></li><li class="content__sections-item content__sections-item--h1"><a href="#create-a-service-account">Create a service account</a></li><li class="content__sections-item content__sections-item--h2"><a href="#about-creating-a-service-account">About creating a service account</a></li><li class="content__sections-item content__sections-item--h2"><a href="#about-creating-a-service-account-secret">About creating a service account secret</a></li><li class="content__sections-item content__sections-item--h1"><a href="#provision-the-service-account-with-permissions">Provision the service account with permissions</a></li><li class="content__sections-item content__sections-item--h2"><a href="#about-the-permissions">About the permissions</a></li><li class="content__sections-item content__sections-item--h2"><a href="#creating-and-assigning-the-permissions">Creating and assigning the permissions</a></li><li class="content__sections-item content__sections-item--h1"><a href="#create-a-configjson-file">Create a config.json file</a></li><li class="content__sections-item content__sections-item--h2"><a href="#install-jenkins">Install Jenkins</a></li><li class="content__sections-item content__sections-item--h1"><a href="#quota-enforced-multi-tenant-jenkins">Quota enforced Multi-Tenant Jenkins</a></li><li class="content__sections-item content__sections-item--h2"><a href="#pre-requisites">Pre-requisites</a></li><li class="content__sections-item content__sections-item--h2"><a href="#creating-and-assigning-the-permissions-2">Creating and assigning the permissions</a></li><li class="content__sections-item content__sections-item--h1"><a href="#create-a-configjson-file-2">Create a config.json file</a></li><li class="content__sections-item content__sections-item--h2"><a href="#install-jenkins-2">Install Jenkins</a></li></ul></div></aside></main></div></div><script src="/assets/js/jquery-3.2.1.js"></script><script src="/assets/js/clipboard.js"></script><script src="/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>