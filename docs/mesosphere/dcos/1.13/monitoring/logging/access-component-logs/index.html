<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Accessing system and component logs - D2iQ Docs</title><meta name="description" content="Managing user access to system and component logs"><link rel="apple-touch-icon" sizes="180x180" href="/dcosdocs/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/dcosdocs/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/dcosdocs/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/dcosdocs/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/dcosdocs/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/dcosdocs/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>DC/OS Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header__menu-item"><a href="/dcosdocs/mesosphere/dcos/services">Services</a></li><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/1.13/monitoring/logging/access-component-logs">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS 1.13"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/2.2/monitoring/logging/access-component-logs">Mesosphere DC/OS 2.2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.1/monitoring/logging/access-component-logs">Mesosphere DC/OS 2.1.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.0/monitoring/logging/access-component-logs">Mesosphere DC/OS 2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/access-component-logs">Mesosphere DC/OS 1.13</a></li></ul><div class="toggle"><p><span class="title">DC/OS</span><span class="version"> 1.13</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/release-notes/"><i data-feather="chevron-right"></i>Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/overview/"><i data-feather="chevron-right"></i>Overview</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/installing/"><i data-feather="chevron-right"></i>Installing</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/gui/"><i data-feather="chevron-right"></i>GUI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/cli/"><i data-feather="chevron-right"></i>CLI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/administering-clusters/"><i data-feather="chevron-right"></i>Administering Clusters</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/networking/"><i data-feather="chevron-right"></i>Networking</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/security/"><i data-feather="chevron-right"></i>Security</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/storage/"><i data-feather="chevron-right"></i>Storage</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/metrics/"><i data-feather="chevron-right"></i>Metrics</a></li><li class="active"><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/"><i data-feather="chevron-right"></i>Monitoring, Logging, and Debugging</a></li><ul><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/performance-monitoring/"><i data-feather="chevron-right"></i>Performance Monitoring</a></li><li class="active"><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/"><i data-feather="chevron-right"></i>Logging</a></li><ul><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/quickstart/">Quick Start</a></li><li class="active active-on"><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/access-component-logs/">Accessing system and component logs</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/configure-task-logs/">Configuring Task Log Output and Retention</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/access-task-logs/">Controlling Access to Task Logs</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/aggregating/"><i data-feather="chevron-right"></i>Log Aggregation</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/logging-reference/">Logging Reference</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/logging-api-examples/">Logging API Examples</a></li></ul><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/debugging/"><i data-feather="chevron-right"></i>Debugging</a></li></ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/hybrid-cloud/"><i data-feather="chevron-right"></i>Hybrid Cloud</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/deploying-jobs/"><i data-feather="chevron-right"></i>Deploying Jobs</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/deploying-services/"><i data-feather="chevron-right"></i>Deploying Services and Pods</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/"><i data-feather="chevron-right"></i>Tutorials</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/api/"><i data-feather="chevron-right"></i>API Reference</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/developing-services/"><i data-feather="chevron-right"></i>Developing DC/OS Services</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2022 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Accessing system and component logs</h1><p class="badge badge--content-header badge--enterprise">ENTERPRISE</p></div><h4 class="content__header-description">Managing user access to system and component logs</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/access-component-logs/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li></ul></div></div><article class="content__article"><p>You can restrict user access to system and component logs.</p>
<p>Here is the <a href="/dcosdocs/mesosphere/dcos/1.13/security/ent/perms-reference/">permission</a> that is required to view the system and component logs:</p>
<table>
<thead>
<tr>
<th>Permission string</th>
<th>full</th>
<th>C</th>
<th>R</th>
<th>U</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dcos:adminrouter:ops:system-logs</code> <br>Controls access to <a href="/dcosdocs/mesosphere/dcos/1.13/api/master-routes/#system">System logs API</a>.</td>
<td>x</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Prerequisites:</strong></p>
<ul>
<li>DC/OS and DC/OS CLI are <a href="/dcosdocs/mesosphere/dcos/1.13/installing/">installed</a> and you are logged in as a superuser.</li>
</ul>
<h1 id="via-the-dcos-web-interface"><a class="content__anchor" href="#via-the-dcos-web-interface" aria-hidden="true"><i data-feather="bookmark"></i></a>Via the DC/OS web interface</h1>
<h3 id="create-the-users-and-grant-permissions"><a class="content__anchor" href="#create-the-users-and-grant-permissions" aria-hidden="true"><i data-feather="bookmark"></i></a>Create the users and grant permissions</h3>
<ol>
<li>
<p>Select <strong>Organization</strong> and choose <strong>Users</strong>. Select an existing or create a new user.</p>
<p><img src="/dcosdocs/mesosphere/dcos/1.13/img/GUI-Organization-Users-View_w_AddUser_Tooltip-1_12.png" alt="New user"></p>
<p>Figure 1. New user screen</p>
</li>
<li>
<p>From the <strong>Permissions</strong> tab, select <strong>ADD PERMISSION</strong>.</p>
<p><img src="/dcosdocs/mesosphere/dcos/1.13/img/GUI-Organization-Users-User_Main_View.png" alt="Add permission to user"></p>
<p>Figure 2. Add Permission button</p>
</li>
<li>
<p>Click <strong>INSERT PERMISSION STRING</strong> to toggle the dialog and paste in the following permissions and click <strong>ADD PERMISSIONS</strong>.</p>
<pre><code class="language-bash">dcos:adminrouter:ops:system-logs full
</code></pre>
<p><img src="/dcosdocs/mesosphere/dcos/1.13/img/GUI-Organization-User-Add_Single_User_Perm_String-1_12.png" alt="Add permission"></p>
<p>Figure 3. Permission string dialog</p>
<p>The <strong>Permissions</strong> tab should now look like this:</p>
<p><img src="/dcosdocs/mesosphere/dcos/1.13/img/GUI-Organization-Users-User_View_w_Perm.png" alt="prod-group permissions complete"></p>
<p>Figure 4. Permissions have been added</p>
</li>
</ol>
<h3 id="log-in-to-the-cli-as-user"><a class="content__anchor" href="#log-in-to-the-cli-as-user" aria-hidden="true"><i data-feather="bookmark"></i></a><a name="verify-perms"></a>Log in to the CLI as user</h3>
<ol>
<li>
<p>Log in to the DC/OS CLI as the user.</p>
<pre><code class="language-bash">dcos auth login
</code></pre>
</li>
<li>
<p>Run this command to access the system and component logs.</p>
<pre><code class="language-bash">dcos node log --leader --component=dcos-mesos-master
</code></pre>
<p>You should see the logs from the Mesos master.</p>
<p>If you do not have the correct permissions, you will see this output:</p>
<pre><code class="language-bash">You are not authorized to perform this operation
</code></pre>
</li>
</ol>
<h1 id="via-the-iam-api"><a class="content__anchor" href="#via-the-iam-api" aria-hidden="true"><i data-feather="bookmark"></i></a>Via the IAM API</h1>
<p><strong>Prerequisite:</strong>
You must <a href="/dcosdocs/mesosphere/dcos/1.13/security/ent/tls-ssl/get-cert/">get the root cert</a> before issuing the curl commands in this section.</p>
<h3 id="tips"><a class="content__anchor" href="#tips" aria-hidden="true"><i data-feather="bookmark"></i></a>Tips</h3>
<ul>
<li>Service resources often include <code>/</code> characters that must be replaced with <code>%252F</code> in curl requests, as shown in the examples below.</li>
<li>When using the API to manage permissions, you must create the permission before granting it. If the permission already exists, the API will return an informative message and you can continue to assign the permission.</li>
</ul>
<h3 id="create-and-grant-the-permissions"><a class="content__anchor" href="#create-and-grant-the-permissions" aria-hidden="true"><i data-feather="bookmark"></i></a><a name="grant-perm"></a>Create and grant the permissions</h3>
<ol>
<li>
<p>Grant the permission to the user (<code>&lt;username&gt;</code>).</p>
<pre><code class="language-bash">dcos security org users grant &lt;username&gt; dcos:adminrouter:ops:system-logs full --description &quot;Grants access to system and component logs.&quot;
</code></pre>
</li>
</ol>
<h3 id="log-in-to-the-cli-as-user-2"><a class="content__anchor" href="#log-in-to-the-cli-as-user-2" aria-hidden="true"><i data-feather="bookmark"></i></a><a name="verify-perms"></a>Log in to the CLI as user</h3>
<ol>
<li>
<p>Log in to the DC/OS CLI as the user.</p>
<pre><code class="language-bash">dcos auth login
</code></pre>
</li>
<li>
<p>Run this command to access the system and component logs.</p>
<pre><code class="language-bash">dcos node log --leader --component=dcos-mesos-master
</code></pre>
<p>You should see the logs from the Mesos master.</p>
<p>If you do not have the correct permissions, you will see this output:</p>
<pre><code class="language-bash">You are not authorized to perform this operation
</code></pre>
</li>
</ol>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h1"><a href="#via-the-dcos-web-interface">Via the DC/OS web interface</a></li><li class="content__sections-item content__sections-item--h1"><a href="#via-the-iam-api">Via the IAM API</a></li></ul></div></aside></main></div></div><script src="/dcosdocs/assets/js/jquery-3.2.1.js"></script><script src="/dcosdocs/assets/js/clipboard.js"></script><script src="/dcosdocs/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>