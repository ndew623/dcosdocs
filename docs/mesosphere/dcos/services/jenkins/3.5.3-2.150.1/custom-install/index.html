<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Customizing your install - D2iQ Docs</title><meta name="description" content="&lt;h1&gt;About customizing your installation parameters&lt;/h1&gt;"><link rel="apple-touch-icon" sizes="180x180" href="/dcosdocs/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/dcosdocs/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/dcosdocs/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/dcosdocs/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/dcosdocs/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/dcosdocs/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>Jenkins Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="spherer"><div class="chooser-current"><a class="chooser-title">Mesosphere</a><svg class="chooser-svg" id="spherer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="spherer-list"><li class="chooser-list-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li></ul></div><div class="chooser" id="ks"><div class="chooser-current"><a class="chooser-title">DKP</a><svg class="chooser-svg" id="kspherer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="kspherer-list"><li class="chooser-list-item"><a href="/dkp/konvoy">Konvoy</a></li><li class="chooser-list-item"><a href="/dkp/kommander">Kommander</a></li><li class="chooser-list-item"><a href="/dkp/dispatch">Dispatch</a></li><li class="chooser-list-item"><a href="/dkp/kaptain">Kaptain</a></li></ul></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/services">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS Services"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/3.6.1-2.190.1/custom-install">Jenkins 3.6.1-2.190.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/3.6.0-2.190.1/custom-install">Jenkins 3.6.0-2.190.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.4-2.150.1/custom-install">Jenkins 3.5.4-2.150.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/custom-install">Jenkins 3.5.3-2.150.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.2-2.107.2/custom-install">Jenkins 3.5.2-2.107.2</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/jenkins/4.0.0-2.204.6/custom-install">Jenkins for DC/OS</a></li></ul><div class="toggle"><p><span class="title">Jenkins</span><span class="version"> 3.5.3-2.150.1</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/release-notes/">Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/jenkins-auth/">Provisioning Jenkins</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/quickstart/">Quickstart</a></li><li class="active active-on"><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/custom-install/">Customizing your install</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/script-template-job-dsl/">Scripting and templating your jobs</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/custom-docker/">Customizing your Docker container</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/advanced-configuration/">Advanced Configuration</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/upgrade/">Upgrading</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/uninstall/">Uninstalling</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2022 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Customizing your install</h1></div><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/services/jenkins/3.5.3-2.150.1/custom-install/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li></ul></div></div><article class="content__article"><h1>About customizing your installation parameters</h1>
<p>The Jenkins for DC/OS package accepts a range of configuration parameters at install.</p>
<p>By default, Jenkins for DC/OS uses a <code>/tmp</code> directory on the local host to store its configuration and build data. At a minimum, you should change this before going into production. We recommend setting up a shared file system. Alternatively, you can pin to an agent.</p>
<p>We also expect that you’ll want to customize the default Docker container to add your own dependencies.</p>
<h1>Using the CLI</h1>
<p><h2>About using the CLI</h2></p>
<p>You can perform a custom installation from either the web interface or the CLI.</p>
<p><h2>Creating a JSON file</h2></p>
<ol>
<li>Create a new file.
<p><strong>Tip:</strong> You might want to choose a pattern like <code>&lt;package-name&gt;-config.json</code>.</p>
<pre><code class="bash">nano jenkins-config.json
</code></pre></li>
<li>Use the information in the configuration reference below to build your JSON. This example creates a new Jenkins for DC/OS service named <code>jenkins-myteam</code> and uses the NFS share located at <code>/mnt/nfs/jenkins-data</code>.
<pre><code class="json">{
    "service": {
        "name": "jenkins-myteam"
    },
    "storage": {
        "host-volume": "/mnt/nfs/jenkins_data"
    }
}
</code></pre>
<p><strong>Tip:</strong> The value of <code>host-volume</code> is the base path to a share on a NFS server or other distributed filesystem. The actual path on-disk for this example is <code>/mnt/nfs/jenkins_data/jenkins-myteam</code>.</p></li></p>
<li>From the CLI, pass the custom options file.
<pre><code class="bash">dcos package install jenkins --options=jenkins-config.json
</code></pre></li>
</ol>
<h1>Configuration reference</h1>
<p><h3>Networking configuration properties</h3></p>
<table class="table">
<thead>
<tr class="header">
<th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>virtual-host</td>
<td>string</td>
<td>The virtual host address to configure for integration with Marathon-LB.</td>
<td><em>No default.</em></td>
</tr>
<tr class="even">
<td>https-redirect</td>
<td>boolean</td>
<td>Indicates whether Marathon-LB should redirect HTTP traffic to HTTPS. This requires ‘virtual-host’ to be set.</td>
<td><code>False</code></td>
</tr>
<tr class="odd">
<td>root-url</td>
<td>string</td>
<td>The web address of the Jenkins installation (e.g. <a href="http://jenkins.example.com" class="uri">http://jenkins.example.com</a>). This is used by Jenkins to refer to itself when creating links in emails, chat notifications, etc.</td>
<td><em>No default.</em></td>
</tr>
<tr class="even">
<td>known-hosts</td>
<td>string</td>
<td>A space-separated list of hosts used to populate the SSH known hosts file on the Jenkins master.</td>
<td><code>github.com</code></td>
</tr>
</tbody>
</table>
<p><h3>Storage configuration properties</h3></p>
<table class="table">
<thead>
<tr class="header">
<th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>host-volume</td>
<td>string</td>
<td>The location of a volume on the host that is used for persisting Jenkins configuration and build data. The final location is derived from this value plus the name set in <code>name</code> (e.g. <code>/mnt/host_volume/jenkins</code>). Note that this path must be the same on all DC/OS agents.</td>
<td><code>/tmp</code></td>
</tr>
<tr class="even">
<td>pinned-hostname</td>
<td>string</td>
<td>An optional DC/OS agent hostname to run this Jenkins instance on (e.g. 10.0.0.1).</td>
<td><em>No default.</em></td>
</tr>
</tbody>
</table>
<p><h3>Service configuration properties</h3></p>
<table class="table">
<thead>
<tr class="header">
<th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>cpus</td>
<td>number</td>
<td>CPU shares to allocate to each Jenkins master.</td>
<td><code>1.0</code></td>
</tr>
<tr class="even">
<td>name</td>
<td>string</td>
<td>The name of the service to display in the DC/OS dashboard.</td>
<td><code>jenkins</code></td>
</tr>
<tr class="odd">
<td>mem</td>
<td>number</td>
<td>Memory (in MB) to allocate to each Jenkins master.</td>
<td><code>2048.0</code></td>
</tr>
</tbody>
</table>
<p><h3>Advanced configuration properties</h3></p>
<table class="table">
<thead>
<tr class="header">
<th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>mesos-master</td>
<td>string</td>
<td>URL of this cluster’s Mesos master.</td>
<td><code>zk://leader.mesos:2181/mesos</code></td>
</tr>
<tr class="even">
<td>docker-credentials-uri</td>
<td>string</td>
<td>An optional URI to be fetched and extracted that contains Docker credentials (e.g. <a href="file:///etc/docker/docker.tar.gz" class="uri">file:///etc/docker/docker.tar.gz</a>).</td>
<td><em>No default.</em></td>
</tr>
<tr class="odd">
<td>docker-image</td>
<td>string</td>
<td>The Docker image to use for the Jenkins service. By default, this package will use the Jenkins image in the Mesosphere organization on Docker Hub, which you must be authenticated against. Otherwise, specify the host, image, and tag for the Jenkins image on your private Docker Registry.</td>
<td><em>No default.</em></td>
</tr>
<tr class="even">
<td>jvm-opts</td>
<td>string</td>
<td>Optional arguments to pass to the JVM.</td>
<td><code>-Xms1024m -Xmx1024m</code></td>
</tr>
<tr class="odd">
<td>role</td>
<td>string</td>
<td>The accepted resource roles (e.g. slave_public). By default, this will deploy to any agents with the * role.</td>
<td><code>*</code></td>
</tr>
</tbody>
</table>
<h1>Examples</h1>
<p><h2>Create a new instance pinned to a single host</h2></p>
<p>You can also specify an optional <code>pinned-hostname</code> constraint. This is useful if you don't have NFS available and need to pin Jenkins to a specific node:
<pre><code>{
    "service": {
        "name": "jenkins-pinned"
    },
    "storage": {
        "host-volume": "/var/jenkins_data",
        "pinned-hostname": "10.0.0.100"
    }
}
</code></pre>
<p><h2>Modify known hosts</h2></p>
<p>With the <code>known-hosts</code> option you can specify a space-separated list of hostnames from which to retrieve the SSH public keys. This list will be populated on the Jenkins master when the bootstrap script runs (at container launch time). You must manually ensure that the SSH known hosts list is populated in any Jenkins agent containers. This is discussed further in <a href="../custom-docker/">Customizing your Docker container</a> and you can see an example in the <a href="https://github.com/mesosphere/dcos-jenkins-dind-agent/"><code>dcos-jenkins-dind-agent</code></a> repo.</p>
<pre><code>{
    "service": {
        "name": "jenkins-private-git"
    },
    "storage": {
        "host-volume": "/mnt/nfs/jenkins_data"
    },
    "networking": {
        "known-hosts": "github.com git.apache.org git.example.com"
    }
}
</code></pre>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h1"><a href="#about-customizing-your-installation-parameters">About customizing your installation parameters</a></li><li class="content__sections-item content__sections-item--h1"><a href="#using-the-cli">Using the CLI</a></li><li class="content__sections-item content__sections-item--h2"><a href="#about-using-the-cli">About using the CLI</a></li><li class="content__sections-item content__sections-item--h2"><a href="#creating-a-json-file">Creating a JSON file</a></li><li class="content__sections-item content__sections-item--h1"><a href="#configuration-reference">Configuration reference</a></li><li class="content__sections-item content__sections-item--h1"><a href="#examples">Examples</a></li><li class="content__sections-item content__sections-item--h2"><a href="#create-a-new-instance-pinned-to-a-single-host">Create a new instance pinned to a single host</a></li><li class="content__sections-item content__sections-item--h2"><a href="#modify-known-hosts">Modify known hosts</a></li></ul></div></aside></main></div></div><script src="/dcosdocs/assets/js/jquery-3.2.1.js"></script><script src="/dcosdocs/assets/js/clipboard.js"></script><script src="/dcosdocs/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>