<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Job Scheduling - D2iQ Docs</title><meta name="description" content="Scheduling jobs with DC/OS Apache Spark"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>Spark Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="spherer"><div class="chooser-current"><a class="chooser-title">Mesosphere</a><svg class="chooser-svg" id="spherer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="spherer-list"><li class="chooser-list-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li></ul></div><div class="chooser" id="ks"><div class="chooser-current"><a class="chooser-title">DKP</a><svg class="chooser-svg" id="kspherer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="kspherer-list"><li class="chooser-list-item"><a href="/dkp/konvoy">Konvoy</a></li><li class="chooser-list-item"><a href="/dkp/kommander">Kommander</a></li><li class="chooser-list-item"><a href="/dkp/dispatch">Dispatch</a></li><li class="chooser-list-item"><a href="/dkp/kaptain">Kaptain</a></li></ul></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/services/spark">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS Services"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/job-scheduling">Spark 2.12.0-3.0.1</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/spark/2.11.0-2.4.6/job-scheduling">Spark 2.11.0-2.4.6</a></li><li><a href="/dcosdocs/mesosphere/dcos/services/spark/2.6.0-2.3.2/job-scheduling">Spark 2.6.0-2.3.2</a></li></ul><div class="toggle"><p><span class="title">Spark</span><span class="version"> 2.12.0-3.0.1</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/release-notes/">Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/quickstart/">Quick Start</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/install/">Install and Customize</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/usage-examples/">Usage Examples</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/hdfs/">HDFS</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/history-server/">History Server</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/security/">Security</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/upgrade/">Upgrade</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/uninstall/">Uninstall</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/runtime-config-change/">Runtime Configuration Changes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/run-job/">Run a Spark Job</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/spark-shell/">Spark Shell</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/custom-docker/">Custom Docker Images</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/fault-tolerance/">Fault Tolerance</a></li><li class="active active-on"><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/job-scheduling/">Job Scheduling</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/kerberos/">Kerberos</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/troubleshooting/">Troubleshooting</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/version-policy/">Version Policy</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/limitations/">Limitations</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/limits/">Tested Limits</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/spark-auth/">Spark Auth</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2022 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Job Scheduling</h1></div><h4 class="content__header-description">Scheduling jobs with DC/OS Apache Spark</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/services/spark/2.12.0-3.0.1/job-scheduling/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li></ul></div></div><article class="content__article"><p>This section is a simple overview of material described in greater detail in the <a href="http://spark.apache.org/docs/latest/configuration.html">Apache Spark configuration page</a> and <a href="http://spark.apache.org/docs/latest/running-on-mesos.html">Running Apache Spark on Mesos page</a>.</p>
<h1 id="modes"><a class="content__anchor" href="#modes" aria-hidden="true"><i data-feather="bookmark"></i></a>Modes</h1>
<p>Spark on Mesos supports two modes of operation: coarse-grained mode and fine-grained mode. Coarse-grained mode provides lower latency, whereas fine-grained mode provides higher utilization. You can find more information in the documentation of <a href="http://spark.apache.org/docs/latest/running-on-mesos.html">Running Apache Spark on Mesos page</a>.</p>
<h1 id="coarse-grained-mode"><a class="content__anchor" href="#coarse-grained-mode" aria-hidden="true"><i data-feather="bookmark"></i></a>Coarse-grained mode</h1>
<p>With the <strong>Coarse-grained mode</strong>, each Spark <strong>executor</strong> is represented by a single Mesos task. As a result, executors have a constant size throughout their lifetime.</p>
<ul>
<li><strong>Executor memory</strong>: <code>spark.executor.memory</code></li>
<li><strong>Executor CPUs</strong>: <code>spark.executor.cores</code>, or all the cores in the offer.</li>
<li><strong>Number of Executors</strong>: <code>spark.cores.max</code> / <code>spark.executor.cores</code>. Executors are brought up until
<code>spark.cores.max</code> is reached. Executors survive for duration of the job.</li>
<li><strong>Executors per agent</strong>: Multiple</li>
</ul>
<p class="message--important"><strong>IMPORTANT: </strong>We highly recommend you set <code>spark.cores.max</code>. If you do not, your Spark job may consume all available resources in your cluster, resulting in unhappy peers.</p>
<h1 id="quota-for-drivers-and-executors"><a class="content__anchor" href="#quota-for-drivers-and-executors" aria-hidden="true"><i data-feather="bookmark"></i></a>Quota for drivers and executors</h1>
<p>Setting <a href="http://mesos.apache.org/documentation/latest/quota/">Mesos Quota</a> for the drivers prevents the Dispatcher from consuming too many resources and assists queueing behavior.</p>
<p>To control the number of drivers the Spark service runs concurrently, you should set a quota for the drivers. The quota guarantees that the Spark Dispatcher has resources available to launch drivers and limits the total impact on the cluster due to drivers.</p>
<p>Optionally, you can set a quota for the drivers to consume to ensure that drivers are not starved of resources by other frameworks and make sure they do not consume too much of the cluster. For more information, see <a href="#coarse-grained-mode">coarse-grained mode</a> above.</p>
<h2 id="best-practices-for-setting-drivers"><a class="content__anchor" href="#best-practices-for-setting-drivers" aria-hidden="true"><i data-feather="bookmark"></i></a>Best practices for setting drivers</h2>
<p>The quota for the drivers allows the operator of the cluster to ensure that only a given number of drivers are concurrently running. As additional drivers are submitted, they are queued by the Spark Dispatcher.</p>
<p>Use the following guidelines to achieve best results:</p>
<ul>
<li>Set the quota conservatively, but be aware that the setting affects the number of jobs that can run concurrently.</li>
<li>Decide how much of your cluster’s resources to allocate to running drivers. Allocated resources are only be used for the Spark drivers, meaning that you can decide roughly how many concurrent jobs you would like to have running at a time. As additional jobs are submitted, they are queued and run with first-in-first-out semantics.</li>
<li>For the most predictable behavior, enforce uniform driver resource requirements and a particular quota size for the Dispatcher. For example, if each driver consumes 1.0 CPU and it is desirable to run up to 5 Spark jobs concurrently, you should create a quota that specifies 5 CPUs.</li>
</ul>
<h3 id="setting-quota-for-the-drivers"><a class="content__anchor" href="#setting-quota-for-the-drivers" aria-hidden="true"><i data-feather="bookmark"></i></a>Setting quota for the drivers</h3>
<ol>
<li>
<p>SSH to the Mesos master and set the quota for a role (<code>dispatcher</code> in this example):</p>
<pre><code class="language-bash">cat dispatcher-quota.json
{
  &quot;role&quot;: &quot;dispatcher&quot;,
  &quot;guarantee&quot;: [
    {
      &quot;name&quot;: &quot;cpus&quot;,
      &quot;type&quot;: &quot;SCALAR&quot;,
      &quot;scalar&quot;: { &quot;value&quot;: 5.0 }
    },
    {
      &quot;name&quot;: &quot;mem&quot;,
      &quot;type&quot;: &quot;SCALAR&quot;,
      &quot;scalar&quot;: { &quot;value&quot;: 5120.0 }
    }
  ]
}
curl -d @dispatcher-quota.json -X POST http://&lt;master&gt;:5050/quota
</code></pre>
</li>
<li>
<p>Install the Spark service with the following options (at a minimum):</p>
<pre><code class="language-bash">cat options.json
{
  &quot;service&quot;: {
    &quot;role&quot;: &quot;dispatcher&quot;
  }
}
dcos package install spark --options=options.json
</code></pre>
</li>
</ol>
<h2 id="best-practices-for-the-executors"><a class="content__anchor" href="#best-practices-for-the-executors" aria-hidden="true"><i data-feather="bookmark"></i></a>Best practices for the executors</h2>
<p>It is recommended to allocate a quota for Spark job executors. Allocating quota for the Spark executors provides:</p>
<ul>
<li>A guarantee that Spark jobs  receive the requested amount of resources.</li>
<li>Additional assurance that even if misconfigured (for example, with a driver with <code>spark.cores.max</code> unset), Spark jobs do not consume resources that impact other tenants on the cluster.</li>
</ul>
<p>The drawback to allocating quota to the executors is that quota resources cannot be used by other frameworks in the cluster.</p>
<h3 id="setting-quota-for-the-executors"><a class="content__anchor" href="#setting-quota-for-the-executors" aria-hidden="true"><i data-feather="bookmark"></i></a>Setting quota for the executors</h3>
<p>Quota can be allocated for Spark executors in the same way it is allocated for Spark dispatchers. If you want to run 100 executors concurrently, each with 1.0 CPU and 4096 MB of memory, you would do the following:</p>
<pre><code class="language-bash">cat executor-quota.json
{
  &quot;role&quot;: &quot;executor&quot;,
  &quot;guarantee&quot;: [
    {
      &quot;name&quot;: &quot;cpus&quot;,
      &quot;type&quot;: &quot;SCALAR&quot;,
      &quot;scalar&quot;: { &quot;value&quot;: 100.0 }
    },
    {
      &quot;name&quot;: &quot;mem&quot;,
      &quot;type&quot;: &quot;SCALAR&quot;,
      &quot;scalar&quot;: { &quot;value&quot;: 409600.0 }
    }
  ]
}
curl -d @executor-quota.json -X POST http://&lt;master&gt;:5050/quota
</code></pre>
<p>When Spark jobs are submitted, they must indicate the role for which the quota has been set to consume resources from this quota. For example:</p>
<pre><code class="language-bash">dcos spark run --verbose --name=spark --submit-args=&quot;\
--driver-cores=1 \
--driver-memory=1024M \
--conf spark.cores.max=8 \
--conf spark.mesos.role=executor \
--class org.apache.spark.examples.SparkPi \
http://downloads.mesosphere.com/spark/assets/spark-examples_2.12-3.0.1.jar 3000&quot;
</code></pre>
<p class="message--important"><strong>IMPORTANT: </strong>: To prevent a single long-running or streaming Spark job from consuming the entire quota, you should set the maximum CPUs for the Spark job to roughly one “job’s worth” of the quota’s resources. This setting ensures that the Spark job gets sufficient resources to make progress, and prevents the job from starving other Spark jobs of resources and provides predictable offer suppression semantics.</p>
<h2 id="permissions-when-using-quota-with-strict-mode"><a class="content__anchor" href="#permissions-when-using-quota-with-strict-mode" aria-hidden="true"><i data-feather="bookmark"></i></a>Permissions when using quota with strict mode</h2>
<p>Strict mode clusters (see <a href="/dcosdocs/mesosphere/dcos/latest/security/ent/#security-modes">security modes</a>) require extra
permissions to be set before you can use quota. Follow the instructions in <a href="https://github.com/mesosphere/spark-build/blob/master/docs/install.md">installing</a> and add the additional permissions for the roles you intend to use, as detailed below.</p>
<p>Using the example above, you would set permissions as follows:</p>
<ol>
<li>
<p>First set the quota for the Dispatcher’s role (<code>dispatcher</code>):</p>
<pre><code class="language-bash">cat dispatcher-quota.json
{
  &quot;role&quot;: &quot;dispatcher&quot;,
  &quot;guarantee&quot;: [
    {
      &quot;name&quot;: &quot;cpus&quot;,
      &quot;type&quot;: &quot;SCALAR&quot;,
      &quot;scalar&quot;: { &quot;value&quot;: 5.0 }
    },
    {
      &quot;name&quot;: &quot;mem&quot;,
      &quot;type&quot;: &quot;SCALAR&quot;,
      &quot;scalar&quot;: { &quot;value&quot;: 5120.0 }
    }
  ]
}
</code></pre>
<p>If you have downloaded the CA certificate,<code>dcos-ca.crt</code> to your local machine from the <code>https://&lt;dcos_url&gt;/ca/dcos-ca.crt</code> endpoint, set the quota <strong>from your local machine</strong>:</p>
<pre><code class="language-bash">curl -X POST --cacert dcos-ca.crt -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; $(dcos config show core.dcos_url)/mesos/quota -d @dispatcher-quota.json -H 'Content-Type: application/json'
</code></pre>
</li>
<li>
<p>Optionally, set the quota for the executors using the same settings as above:</p>
<pre><code class="language-bash">cat executor-quota.json
{
  &quot;role&quot;: &quot;executor&quot;,
  &quot;guarantee&quot;: [
    {
      &quot;name&quot;: &quot;cpus&quot;,
      &quot;type&quot;: &quot;SCALAR&quot;,
      &quot;scalar&quot;: { &quot;value&quot;: 100.0 }
    },
    {
      &quot;name&quot;: &quot;mem&quot;,
      &quot;type&quot;: &quot;SCALAR&quot;,
      &quot;scalar&quot;: { &quot;value&quot;: 409600.0 }
    }
  ]
}
</code></pre>
</li>
<li>
<p>If you have not already done so, set the quota from your local machine. For example, assuming you have <code>dcos-ca.crt</code> locally:</p>
<pre><code class="language-bash">curl -X POST --cacert dcos-ca.crt -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; $(dcos config show core.dcos_url)/mesos/quota -d @executor-quota.json -H 'Content-Type: application/json'
</code></pre>
</li>
<li>
<p>Install Spark with these minimal configuration settings:</p>
<pre><code class="language-bash">{
  &quot;service&quot;: {
    &quot;service_account&quot;: &quot;spark-principal&quot;,
    &quot;role&quot;: &quot;dispatcher&quot;,
    &quot;user&quot;: &quot;root&quot;,
    &quot;service_account_secret&quot;: &quot;spark/spark-secret&quot;
  }
}
</code></pre>
</li>
<li>
<p>Now you are ready to run a Spark job using the principal you set and the roles:</p>
<pre><code class="language-bash">dcos spark run --verbose --submit-args=&quot; \
--conf spark.mesos.principal=spark-principal \
--conf spark.mesos.role=executor \
--conf spark.mesos.containerizer=mesos \
--class org.apache.spark.examples.SparkPi http://downloads.mesosphere.com/spark/assets/spark-examples_2.12-3.0.1.jar 100&quot;
</code></pre>
</li>
</ol>
<h1 id="setting-sparkcoresmax"><a class="content__anchor" href="#setting-sparkcoresmax" aria-hidden="true"><i data-feather="bookmark"></i></a>Setting <code>spark.cores.max</code></h1>
<p>To improve Spark job execution reliability, set the maximum number of cores consumed by any given job. This avoids any particular Spark job from consuming too many resources in a cluster. It is highly recommended that each Spark job be submitted with a limitation on the maximum number of cores (CPUs) it can consume. This is especially important for long-running and streaming Spark jobs.</p>
<pre><code class="language-bash">dcos spark run --verbose --name=spark --submit-args=&quot;\
--driver-cores=1 \
--driver-memory=1024M \
--conf spark.cores.max=8 \ #&lt;&lt; Very important!
--class org.apache.spark.examples.SparkPi \
http://downloads.mesosphere.com/spark/assets/spark-examples_2.12-3.0.1.jar 3000&quot;
</code></pre>
<p>When running multiple concurrent Spark jobs, consider setting <code>spark.cores.max</code> between <code>&lt;total_executor_quota&gt;/&lt;max_concurrent_jobs&gt;</code> and <code>&lt;total_executor_quota&gt;</code>, depending on your workload characteristics and goals.</p>
<h1 id="fine-grained-mode-deprecated"><a class="content__anchor" href="#fine-grained-mode-deprecated" aria-hidden="true"><i data-feather="bookmark"></i></a>Fine-grained mode (deprecated)</h1>
<p class="message--note"><strong>NOTE: </strong>Fine-grained mode has been deprecated and does not have all of the features of coarse-grained mode.</p>
<p>In “fine-grained” mode, each Spark <strong>task</strong> is represented by a single Mesos task. When a Spark task finishes, the resources represented by its Mesos task are relinquished. Fine-grained mode enables finer-grained resource allocation at the cost of task startup latency.</p>
<ul>
<li><strong>Executor memory</strong>: <code>spark.executor.memory</code></li>
<li><strong>Executor CPUs</strong>: Increases and decreases as tasks start and terminate.</li>
<li><strong>Number of Executors</strong>: Increases and decreases as tasks start and terminate.</li>
<li><strong>Executors per agent</strong>: At most 1</li>
</ul>
<h1 id="properties"><a class="content__anchor" href="#properties" aria-hidden="true"><i data-feather="bookmark"></i></a>Properties</h1>
<p>The following is a description of the most common Spark scheduling properties on Mesos. For a full list, see the <a href="http://spark.apache.org/docs/latest/configuration.html">Spark configuration page</a> and the <a href="http://spark.apache.org/docs/latest/running-on-mesos.html">Spark on Mesos configuration page</a>.</p>
<table class="table">
<tr>
<th>property</th>
<th>default</th>
<th>description</th>
</tr>
<tr>
<td>spark.mesos.coarse</td>
<td>true</td>
<td>Described above.</td>
</tr>
<tr>
<td>spark.executor.memory</td>
<td>1g</td>
<td>Executor memory allocation.</td>
</tr>
<tr>
<td>spark.executor.cores</td>
<td>All available cores in the offer</td>
<td>Coarse-grained mode only. DC/OS Apache Spark >= 1.6.1. Executor CPU allocation.</td>
</tr>
<tr>
<td>spark.cores.max</td>
<td>unlimited</td>
<td>Maximum total number of cores to allocate.</td>
</tr>
</table>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h1"><a href="#modes">Modes</a></li><li class="content__sections-item content__sections-item--h1"><a href="#coarse-grained-mode">Coarse-grained mode</a></li><li class="content__sections-item content__sections-item--h1"><a href="#quota-for-drivers-and-executors">Quota for drivers and executors</a></li><li class="content__sections-item content__sections-item--h2"><a href="#best-practices-for-setting-drivers">Best practices for setting drivers</a></li><li class="content__sections-item content__sections-item--h2"><a href="#best-practices-for-the-executors">Best practices for the executors</a></li><li class="content__sections-item content__sections-item--h2"><a href="#permissions-when-using-quota-with-strict-mode">Permissions when using quota with strict mode</a></li><li class="content__sections-item content__sections-item--h1"><a href="#setting-sparkcoresmax">Setting spark.cores.max</a></li><li class="content__sections-item content__sections-item--h1"><a href="#fine-grained-mode-deprecated">Fine-grained mode (deprecated)</a></li><li class="content__sections-item content__sections-item--h1"><a href="#properties">Properties</a></li></ul></div></aside></main></div></div><script src="/assets/js/jquery-3.2.1.js"></script><script src="/assets/js/clipboard.js"></script><script src="/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>