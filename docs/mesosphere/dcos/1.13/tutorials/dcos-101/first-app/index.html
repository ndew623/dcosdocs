<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Deploy the first application - D2iQ Docs</title><meta name="description" content="Describes how to define and deploy a sample service instance on the cluster (part 4)"><link rel="apple-touch-icon" sizes="180x180" href="/dcosdocs/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/dcosdocs/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/dcosdocs/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/dcosdocs/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/dcosdocs/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/dcosdocs/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/dcosdocs/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>DC/OS Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header__menu-item"><a href="/dcosdocs/mesosphere/dcos/services">Services</a></li><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/1.13/tutorials/dcos-101/first-app">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS 1.13"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/2.2/tutorials/dcos-101">Mesosphere DC/OS 2.2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.1/tutorials/dcos-101">Mesosphere DC/OS 2.1.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.0/tutorials/dcos-101">Mesosphere DC/OS 2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/first-app">Mesosphere DC/OS 1.13</a></li></ul><div class="toggle"><p><span class="title">DC/OS</span><span class="version"> 1.13</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/release-notes/"><i data-feather="chevron-right"></i>Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/overview/"><i data-feather="chevron-right"></i>Overview</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/installing/"><i data-feather="chevron-right"></i>Installing</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/gui/"><i data-feather="chevron-right"></i>GUI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/cli/"><i data-feather="chevron-right"></i>CLI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/administering-clusters/"><i data-feather="chevron-right"></i>Administering Clusters</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/networking/"><i data-feather="chevron-right"></i>Networking</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/security/"><i data-feather="chevron-right"></i>Security</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/storage/"><i data-feather="chevron-right"></i>Storage</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/metrics/"><i data-feather="chevron-right"></i>Metrics</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/"><i data-feather="chevron-right"></i>Monitoring, Logging, and Debugging</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/hybrid-cloud/"><i data-feather="chevron-right"></i>Hybrid Cloud</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/deploying-jobs/"><i data-feather="chevron-right"></i>Deploying Jobs</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/deploying-services/"><i data-feather="chevron-right"></i>Deploying Services and Pods</a></li><li class="active"><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/"><i data-feather="chevron-right"></i>Tutorials</a></li><ul><li class="active"><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/"><i data-feather="chevron-right"></i>Introducing DC/OS</a></li><ul><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/start-here/">Create a cluster</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/cli/">Install the command-line interface</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/first-package/">Install the first package</a></li><li class="active active-on"><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/first-app/">Deploy the first application</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/create-service/">Create and run custom apps</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/schedule-jobs/">Create and schedule jobs</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/service-discovery/">Discover deployed services</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/native-app/">Deploy and expose native applications</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/resources/">Allocate and scale resources</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/loadbalancing/">Load balancing workload</a></li></ul><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/stateful-services/">Running stateful services on DC/OS</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/autoscaling/"><i data-feather="chevron-right"></i>Autoscaling with Marathon</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/iot_pipeline/">Deploying a load-balanced data pipeline</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/deploy-on-marathon/">Deploying Marathon apps with Jenkins</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/task-labels/">Labeling tasks and jobs</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-debug/"><i data-feather="chevron-right"></i>Debugging applications on DC/OS</a></li></ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/api/"><i data-feather="chevron-right"></i>API Reference</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/developing-services/"><i data-feather="chevron-right"></i>Developing DC/OS Services</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2022 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Deploy the first application</h1></div><h4 class="content__header-description">Describes how to define and deploy a sample service instance on the cluster (part 4)</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/first-app/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li></ul></div></div><article class="content__article"><p>Now that you are familiar with how to search for and install services from the DC/OS package repository, you are ready to start deploying applications that use the service.</p>
<p>This tutorial demonstrates how you can deploy a simple application that connects to the <a href="https://redislabs.com/">Redis</a> service you deployed in the previous tutorial.</p>
<h1 id="before-you-begin"><a class="content__anchor" href="#before-you-begin" aria-hidden="true"><i data-feather="bookmark"></i></a>Before you begin</h1>
<p>Before starting this tutorial, you should verify the following:</p>
<ul>
<li>You have access to a running <a href="../start-here/">DC/OS cluster</a> with at least at least one master node and three agent nodes.</li>
<li>You have access to a computer where the <a href="../cli/">DC/OS CLI</a> is installed.</li>
<li>You have the <a href="/dcosdocs/mesosphere/dcos/1.13/tutorials/dcos-101/first-package/">Redis</a> package installed and the Redis service running in your cluster.</li>
</ul>
<p>The sample application in this tutorial has some dependencies on external libraries. To ensure you can complete the tutorial, you should download the Docker image for the sample app. The Docker image provided includes all of the necessary files so that you don’t need to download any additional libraries or resolve external dependencies.</p>
<h1 id="learning-objectives"><a class="content__anchor" href="#learning-objectives" aria-hidden="true"><i data-feather="bookmark"></i></a>Learning objectives</h1>
<p>By completing this tutorial, you will learn:</p>
<ul>
<li>How to deploy a simple app definition that connects to the Redis service.</li>
<li>How to check the status of your sample app.</li>
</ul>
<h1 id="review-the-sample-app-definition"><a class="content__anchor" href="#review-the-sample-app-definition" aria-hidden="true"><i data-feather="bookmark"></i></a>Review the sample app definition</h1>
<p>For this tutorial, you are going to deploy a very simple <a href="https://raw.githubusercontent.com/joerg84/dcos-101/master/app1/app1.py">sample app</a> that checks whether a connection to the Redis service is available, then prints the total number of keys stored there.</p>
<p>The sample app is a Python script has a dependency on the <a href="https://pypi.python.org/pypi/redis">redis-py</a> Python library. Because of this dependency and that you cannot assume the required library will be present on all agent nodes, you should run the sample app using the <code>dcos-101</code> Docker container that provides all of the dependencies.</p>
<p>You might also want to review:</p>
<ul>
<li>The <a href="https://github.com/joerg84/dcos-101/blob/master/app1/DOCKERFILE">DOCKERFILE</a>, used to create the <code>dcos-101</code> image.</li>
<li>The <a href="https://raw.githubusercontent.com/joerg84/dcos-101/master/app1/app1.json">app definition</a> used to deploy and manage the application. This app definition downloads the sample app Python script and runs it inside the <code>dcos-101</code> container.</li>
</ul>
<h1 id="deploy-the-sample-app"><a class="content__anchor" href="#deploy-the-sample-app" aria-hidden="true"><i data-feather="bookmark"></i></a>Deploy the sample app</h1>
<ol>
<li>
<p>Add the sample app to Marathon using the app definition by running the following command:</p>
<pre><code class="language-bash">dcos marathon app add https://raw.githubusercontent.com/joerg84/dcos-101/master/app1/app1.json
</code></pre>
</li>
<li>
<p>Check that the sample app is running.</p>
<p>From the DC/OS web-based console:</p>
<ul>
<li>
<p>Click <strong>Services</strong>.
<img src="/dcosdocs/mesosphere/dcos/1.13/img/tutorial-dcos101-app1-service.png" alt="Viewing the sample app in the list of services"></p>
</li>
<li>
<p>Click <strong>dcos-101</strong>.
<img src="/dcosdocs/mesosphere/dcos/1.13/img/tutorial-app1-view.png" alt="Viewing app1 information"></p>
</li>
<li>
<p>Click <strong>app1</strong>.
<img src="/dcosdocs/mesosphere/dcos/1.13/img/tutorial-app1-tasks.png" alt="Viewing task information"></p>
</li>
</ul>
<p>From the DC/OS CLI:</p>
<ul>
<li>View the status for all DC/OS tasks by running: <code>dcos task</code></li>
<li>View information for all Marathon apps by running: <code>dcos marathon app list</code></li>
<li>View log information for the app by running: <code>dcos task log app1</code></li>
</ul>
<p>The output from the <code>dcos task log app1</code> command indicates the node and port where the <strong>app1</strong> sample application is running, the status of the connection to Redis, and the number of keys you have stored in the Redis service.</p>
<p>For example:</p>
<pre><code>Running on node '10.4.6.52' and port '6512
Redis Connected. Total number of keys: 2
</code></pre>
<p>Keep in mind that the node and port information might vary between different runs and over the lifetime of the deployed app, depending on other events in the cluster. How DC/OS locates service instances running on different nodes and using different ports is covered in a later section.</p>
</li>
</ol>
<h1 id="next-steps"><a class="content__anchor" href="#next-steps" aria-hidden="true"><i data-feather="bookmark"></i></a>Next steps</h1>
<p>In this tutorial, you deployed your first app inside a Docker container using Marathon and verified that the app is running and that it can connect successfully to the previously-deployed Redis service.</p>
<p>Taken together, these two tutorials represent a common scenario in which you deploy a backend service such as Redis or MySQL, then deploy apps that connect to that service to perform specific tasks such as reporting the number of keys stored in the Redis service or presenting the results of a query in a dashboard.</p>
<p>The next tutorials explore additional deployment tasks that you can perform and expose additional components of the DC/OS architecture:</p>
<ul>
<li><a href="../create-service/">Create and deploy your own apps</a></li>
<li><a href="../service-discovery/">Discover deployed services</a></li>
<li><a href="../native-app/">Deploy native containerized applications</a></li>
<li><a href="../schedule-jobs/">Schedule tasks to run as jobs</a></li>
</ul>
<h1 id="related-topics"><a class="content__anchor" href="#related-topics" aria-hidden="true"><i data-feather="bookmark"></i></a>Related topics</h1>
<p>You have now deployed the Redis service and a predefined sample app using <a href="https://mesosphere.github.io/marathon/">Marathon</a>.</p>
<p>Marathon is a core component of the DC/OS platform. Marathon enables the DC/OS cluster to better support long-running services and is used to perform several key operations, including scaling up or down the number of app instances, modifying resource requires or configuration details, and deploying or removing applications from the cluster.</p>
<p>For more information about working with Marathon, see the following topics:</p>
<ul>
<li><a href="/dcosdocs/mesosphere/dcos/1.13/deploying-services/">Deploying services and pods</a> for informaiton about using Marathon to manage your processes, services, and multiple service pods.</li>
<li><a href="/dcosdocs/mesosphere/dcos/1.13/cli/command-reference/dcos-marathon/">DC/OS CLI Marathon plugin</a> for information about using DC/OS CLI commands for Marathon. You can also get more information about <code>dcos marathon</code> commands by typing <code>dcos marathon app --help</code> in a terminal shell.</li>
<li><a href="http://mesosphere.github.io/marathon/api-console/index.html">REST API</a> for information about using HTTP endpoints.</li>
</ul>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h1"><a href="#before-you-begin">Before you begin</a></li><li class="content__sections-item content__sections-item--h1"><a href="#learning-objectives">Learning objectives</a></li><li class="content__sections-item content__sections-item--h1"><a href="#review-the-sample-app-definition">Review the sample app definition</a></li><li class="content__sections-item content__sections-item--h1"><a href="#deploy-the-sample-app">Deploy the sample app</a></li><li class="content__sections-item content__sections-item--h1"><a href="#next-steps">Next steps</a></li><li class="content__sections-item content__sections-item--h1"><a href="#related-topics">Related topics</a></li></ul></div></aside></main></div></div><script src="/dcosdocs/assets/js/jquery-3.2.1.js"></script><script src="/dcosdocs/assets/js/clipboard.js"></script><script src="/dcosdocs/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>