<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Monitoring, Logging, and Debugging - D2iQ Docs</title><meta name="description" content="Learn how to monitor the health of your datacenter operations with DC/OS"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>DC/OS Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header__menu-item"><a href="/dcosdocs/mesosphere/dcos/services">Services</a></li><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="spherer"><div class="chooser-current"><a class="chooser-title">Mesosphere</a><svg class="chooser-svg" id="spherer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="spherer-list"><li class="chooser-list-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li></ul></div><div class="chooser" id="ks"><div class="chooser-current"><a class="chooser-title">DKP</a><svg class="chooser-svg" id="kspherer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="kspherer-list"><li class="chooser-list-item"><a href="/dkp/konvoy">Konvoy</a></li><li class="chooser-list-item"><a href="/dkp/konvoy/partner-solutions">Partner Solutions</a></li><li class="chooser-list-item"><a href="/dkp/kommander">Kommander</a></li><li class="chooser-list-item"><a href="/dkp/dispatch">Dispatch</a></li><li class="chooser-list-item"><a href="/dkp/kaptain">Kaptain</a></li><li class="chooser-list-item"><a href="/dkp/conductor">Conductor</a></li></ul></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/1.13/monitoring">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS 1.13"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/konvoy/partner-solutions">Partner Solutions</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__item"><a href="/dkp/conductor">Conductor</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/2.2/monitoring">Mesosphere DC/OS 2.2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.1/monitoring">Mesosphere DC/OS 2.1.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.0/monitoring">Mesosphere DC/OS 2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/1.13/monitoring">Mesosphere DC/OS 1.13</a></li></ul><div class="toggle"><p><span class="title">DC/OS</span><span class="version"> 1.13</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/release-notes/"><i data-feather="chevron-right"></i>Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/overview/"><i data-feather="chevron-right"></i>Overview</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/installing/"><i data-feather="chevron-right"></i>Installing</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/gui/"><i data-feather="chevron-right"></i>GUI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/cli/"><i data-feather="chevron-right"></i>CLI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/administering-clusters/"><i data-feather="chevron-right"></i>Administering Clusters</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/networking/"><i data-feather="chevron-right"></i>Networking</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/security/"><i data-feather="chevron-right"></i>Security</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/storage/"><i data-feather="chevron-right"></i>Storage</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/metrics/"><i data-feather="chevron-right"></i>Metrics</a></li><li class="active active-on"><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/"><i data-feather="chevron-right"></i>Monitoring, Logging, and Debugging</a></li><ul><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/performance-monitoring/"><i data-feather="chevron-right"></i>Performance Monitoring</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging/"><i data-feather="chevron-right"></i>Logging</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/debugging/"><i data-feather="chevron-right"></i>Debugging</a></li></ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/hybrid-cloud/"><i data-feather="chevron-right"></i>Hybrid Cloud</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/deploying-jobs/"><i data-feather="chevron-right"></i>Deploying Jobs</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/deploying-services/"><i data-feather="chevron-right"></i>Deploying Services and Pods</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/tutorials/"><i data-feather="chevron-right"></i>Tutorials</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/api/"><i data-feather="chevron-right"></i>API Reference</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/1.13/developing-services/"><i data-feather="chevron-right"></i>Developing DC/OS Services</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2021 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Monitoring, Logging, and Debugging</h1></div><h4 class="content__header-description">Learn how to monitor the health of your datacenter operations with DC/OS</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/1.13/monitoring/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li><li class="actions__item"><a class="actions__link" href="https://jira.d2iq.com/secure/CreateIssueDetails!init.jspa?pid=14105&amp;issuetype=1&amp;summary=Feedback+for+Monitoring,+Logging,+and+Debugging&amp;description=Source:%20https://docs.d2iq.com/dcosdocs/mesosphere/dcos/1.13/monitoring&amp;labels=documentation&amp;labels=needs_triage&amp;components=19804&amp;priority=3&amp;customfield_12300=44" target="_blank"><i class="actions__icon" data-feather="message-square"></i><span class="actions__text">Feedback</span></a></li></ul></div></div><article class="content__article"><p>Monitoring the health of all the pieces that make up DC/OS is vital to datacenter operators and for troubleshooting hard-to-diagnose bugs. You can monitor the health of your cluster components from the DC/OS UI component health page. The component health page displays information from the system health API, which monitors the core DC/OS components.</p>
<p>DC/OS components are the <a href="https://www.freedesktop.org/wiki/Software/systemd/"><code>systemd</code> units</a> that make up the core of DC/OS. These components are monitored by our internal diagnostics utility (<code>dcos-diagnostics.service</code>). This utility scans all the DC/OS units, and then exposes an HTTP API on each host. For a complete description of the DC/OS components, see the <a href="/dcosdocs/mesosphere/dcos/1.13/overview/architecture/components/">documentation</a>. The component health page provides the health status of all DC/OS system components that are running in systemd. You can drill down by health status, host IP address, or specific systemd unit.</p>
<h2 id="getting-started"><a class="content__anchor" href="#getting-started" aria-hidden="true"><i data-feather="bookmark"></i></a>Getting Started</h2>
<p>Launch the <a href="/dcosdocs/mesosphere/dcos/1.13/gui/">DC/OS UI</a> and navigate to the <strong>System -&gt; Components</strong> page. You can sort components by health.</p>
<p><img src="/dcosdocs/mesosphere/dcos/1.13/img/GUI-Components-List_View-1_12.png" alt="system health"></p>
<p>Figure 1. Components page showing health status</p>
<p>You can click on a DC/OS component to view the details, including role, node, and health.</p>
<p><img src="/dcosdocs/mesosphere/dcos/1.13/img/GUI-Components-Compenent_Detail_View-1_12.png" alt="node detail"></p>
<p>Figure 2. Individual component detail</p>
<p>You can debug further by clicking the node to view the component <code>journald</code> (log) output.</p>
<p><img src="/dcosdocs/mesosphere/dcos/1.13/img/GUI-Components-Individual_Node_Detail_View-1_12.png" alt="log"></p>
<p>Figure 3. <code>Journald</code> log output</p>
<h2 id="health-states"><a class="content__anchor" href="#health-states" aria-hidden="true"><i data-feather="bookmark"></i></a>Health States</h2>
<p>Possible health states are unhealthy and healthy. We infer this from codes 0 and 1.</p>
<ul>
<li><strong>Healthy</strong> All cluster nodes are healthy. The units are loaded and not in the “active” or “inactive” state.</li>
<li><strong>Unhealthy</strong> One or more nodes have issues. The units are not loaded or are in the “active” or “inactive” state.</li>
</ul>
<p>The system health API has four possible states: 0 - 3, OK; CRITICAL; WARNING; UNKNOWN.</p>
<h2 id="system-health-http-api-endpoint"><a class="content__anchor" href="#system-health-http-api-endpoint" aria-hidden="true"><i data-feather="bookmark"></i></a>System health HTTP API endpoint</h2>
<p>The system health endpoint is exposed through the DC/OS diagnostics utility on the master nodes:</p>
<pre><code class="language-bash">curl --unix-socket /run/dcos/dcos-diagnostics.sock http://localhost/system/health/v1
</code></pre>
<h2 id="aggregation"><a class="content__anchor" href="#aggregation" aria-hidden="true"><i data-feather="bookmark"></i></a>Aggregation</h2>
<p>Aggregation of the cluster health endpoints is accomplished by the same diagnostics application on the master nodes. You can explore this API further by making a few queries to any master in your cluster:</p>
<ol>
<li>
<p>SSH to your master node:</p>
<pre><code class="language-bash">dcos node ssh --master-proxy --leader
</code></pre>
</li>
<li>
<p>Run this command to open a root session:</p>
<pre><code class="language-bash">sudo su -
</code></pre>
</li>
<li>
<p>Run these commands to get cluster health:</p>
<ul>
<li>
<p>System health by unit:</p>
<pre><code class="language-bash">curl --unix-socket /run/dcos/dcos-diagnostics.sock http://localhost/system/health/v1/units
</code></pre>
</li>
<li>
<p>System health by node:</p>
<pre><code class="language-bash">curl --unix-socket /run/dcos/dcos-diagnostics.sock http://localhost/system/health/v1/nodes
</code></pre>
</li>
<li>
<p>System health report:</p>
<pre><code class="language-bash">curl --unix-socket /run/dcos/dcos-diagnostics.sock http://localhost/system/health/v1/report
</code></pre>
</li>
</ul>
</li>
</ol>
<p>The DC/OS user interface uses these aggregation endpoints to generate the data you explore in the system health console.</p>
<h2 id="known-issues"><a class="content__anchor" href="#known-issues" aria-hidden="true"><i data-feather="bookmark"></i></a>Known Issues</h2>
<h3 id="misinterpreting-system-health-by-unit"><a class="content__anchor" href="#misinterpreting-system-health-by-unit" aria-hidden="true"><i data-feather="bookmark"></i></a>Misinterpreting system health by unit</h3>
<p>You can sort system health by <code>systemd</code> unit. However, this search can bring up misleading information, as the service itself can be healthy but the node on which it runs is not. This manifests itself as a service showing “healthy” but nodes associated with that service as “unhealthy”.</p>
<h3 id="missing-cluster-hosts"><a class="content__anchor" href="#missing-cluster-hosts" aria-hidden="true"><i data-feather="bookmark"></i></a>Missing cluster hosts</h3>
<p>The system health API relies on Mesos-DNS to know about all the cluster hosts. It finds these hosts by combining a query from <code>mesos.master</code> A records as well as <code>leader.mesos:5050/slaves</code> to get the complete list of hosts in the cluster. This system has a known bug, in which an agent will not show up in the list returned from <code>leader.mesos:5050/slaves</code> if the Mesos agent service is not healthy. This means the system health API will not show this host. If you experience this behavior it is most likely that your Mesos agent service on the missing host is unhealthy.</p>
<h3 id="diagnostics-bundle-contents"><a class="content__anchor" href="#diagnostics-bundle-contents" aria-hidden="true"><i data-feather="bookmark"></i></a>Diagnostics bundle contents</h3>
<p>The contents of the generated bundle are not stable over time and any internal or third party bundle analysis tooling should be programmed very defensively in this regard.</p>
<h2 id="troubleshooting"><a class="content__anchor" href="#troubleshooting" aria-hidden="true"><i data-feather="bookmark"></i></a>Troubleshooting</h2>
<p>If you have any problems, you can check if the diagnostics service is running by SSHing to the Mesos leading master and checking the <code>systemd</code> status of the diagnostics component (<code>dcos-diagnostics.service</code>).</p>
<div class="grid"><a class="grid__item" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/performance-monitoring"><div class="grid__header__wrapper"><h3 class="grid__header">Performance Monitoring</h3></div><div class="grid__desc__wrapper"><p class="grid__desc">Monitoring a DC/OS cluster<span class="grid__desc__ellipsis">&#8230;Read More</span></p></div><div class="grid__link"><i data-feather="arrow-right"></i></div></a><a class="grid__item" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/logging"><div class="grid__header__wrapper"><h3 class="grid__header">Logging</h3></div><div class="grid__desc__wrapper"><p class="grid__desc">Understanding diagnostic and status logs for DC/OS core components and services<span class="grid__desc__ellipsis">&#8230;Read More</span></p></div><div class="grid__link"><i data-feather="arrow-right"></i></div></a><a class="grid__item" href="/dcosdocs/mesosphere/dcos/1.13/monitoring/debugging"><div class="grid__header__wrapper"><h3 class="grid__header">Debugging</h3></div><div class="grid__desc__wrapper"><p class="grid__desc">Debugging DC/OS using the CLI and UI<span class="grid__desc__ellipsis">&#8230;Read More</span></p></div><div class="grid__link"><i data-feather="arrow-right"></i></div></a></div></article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h2"><a href="#getting-started">Getting Started</a></li><li class="content__sections-item content__sections-item--h2"><a href="#health-states">Health States</a></li><li class="content__sections-item content__sections-item--h2"><a href="#system-health-http-api-endpoint">System health HTTP API endpoint</a></li><li class="content__sections-item content__sections-item--h2"><a href="#aggregation">Aggregation</a></li><li class="content__sections-item content__sections-item--h2"><a href="#known-issues">Known Issues</a></li><li class="content__sections-item content__sections-item--h2"><a href="#troubleshooting">Troubleshooting</a></li></ul></div></aside></main></div></div><script src="/assets/js/jquery-3.2.1.js"></script><script src="/assets/js/clipboard.js"></script><script src="/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>