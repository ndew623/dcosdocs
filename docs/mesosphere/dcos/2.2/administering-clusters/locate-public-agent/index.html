<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Finding a Public Agent IP - D2iQ Docs</title><meta name="description" content="Finding a public agent IP address"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>DC/OS Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header__menu-item"><a href="/dcosdocs/mesosphere/dcos/services">Services</a></li><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS 2.2"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/locate-public-agent">Mesosphere DC/OS 2.2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.1/administering-clusters/locate-public-agent">Mesosphere DC/OS 2.1.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.0/administering-clusters/locate-public-agent">Mesosphere DC/OS 2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/1.13/administering-clusters/locate-public-agent">Mesosphere DC/OS 1.13</a></li></ul><div class="toggle"><p><span class="title">DC/OS</span><span class="version"> 2.2</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/release-notes/"><i data-feather="chevron-right"></i>Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/overview/"><i data-feather="chevron-right"></i>Overview</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/installing/"><i data-feather="chevron-right"></i>Installing</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/gui/"><i data-feather="chevron-right"></i>GUI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/cli/"><i data-feather="chevron-right"></i>CLI</a></li><li class="active"><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/"><i data-feather="chevron-right"></i>Administering Clusters</a></li><ul><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/sshcluster/">SSHing into Nodes</a></li><li class="active active-on"><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/locate-public-agent/">Finding a Public Agent IP</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/multiple-clusters/"><i data-feather="chevron-right"></i>Multiple Clusters</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/component-management/">Component Management</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/backup-and-restore/"><i data-feather="chevron-right"></i>Backup and Restore</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/securing-your-cluster/">Securing a cluster</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/managing-aws/">Managing AWS</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/package-registry/">Package Registry</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/convert-agent-type/">Converting Agent Node Types</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/add-a-node/">Adding Agent Nodes</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/replacing-a-master-node/">Replace a master node</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/draining-a-node/">Draining a Node</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/delete-node/">Shut Down and Decommission Nodes</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/recovering-agent-disk-space/">Recovering Agent Disk Space</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/licenses/"><i data-feather="chevron-right"></i>Licenses</a></li></ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/networking/"><i data-feather="chevron-right"></i>Networking</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/security/"><i data-feather="chevron-right"></i>Security</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/storage/"><i data-feather="chevron-right"></i>Storage</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/metrics/"><i data-feather="chevron-right"></i>Metrics</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/monitoring/"><i data-feather="chevron-right"></i>Monitoring, Logging, and Debugging</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/multi-tenancy/"><i data-feather="chevron-right"></i>Multi-Tenancy for DC/OS Clusters</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/hybrid-cloud/"><i data-feather="chevron-right"></i>Hybrid Cloud</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/deploying-jobs/"><i data-feather="chevron-right"></i>Deploying Jobs</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/deploying-services/"><i data-feather="chevron-right"></i>Deploying Services and Pods</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/tutorials/"><i data-feather="chevron-right"></i>Tutorials</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/api/"><i data-feather="chevron-right"></i>API Reference</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/developing-services/"><i data-feather="chevron-right"></i>Developing DC/OS Services</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.2/archives/">Access Documentation Archives</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2022 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Finding a Public Agent IP</h1></div><h4 class="content__header-description">Finding a public agent IP address</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/2.2/administering-clusters/locate-public-agent/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li></ul></div></div><article class="content__article"><p>After you have installed DC/OS with a public agent node declared, you can navigate to the public IP address of your public agent node. You can expose the public-facing IP address for an agent as a gateway for access to services that are running inside the DC/OS cluster. For example, if you are configuring load balancing to distribute inbound requests to the services in a cluster, the requests are typically routed through the public IP address frontend to an appropriate service instance backend isolated behind a firewall.</p>
<h1 id="before-you-begin"><a class="content__anchor" href="#before-you-begin" aria-hidden="true"><i data-feather="bookmark"></i></a>Before you begin</h1>
<ul>
<li>You must have DC/OS installed with at least one master node and at least one <a href="/dcosdocs/mesosphere/dcos/2.2/overview/concepts/#public-agent-node">public agent</a> node.</li>
<li>You must have the most recent version of the DC/OS <a href="/dcosdocs/mesosphere/dcos/2.2/cli/">CLI</a> installed.</li>
<li>You must have <a href="/dcosdocs/mesosphere/dcos/2.2/administering-clusters/sshcluster/">secure shell (SSH)</a> installed and configured to allow remote session access to cluster nodes.</li>
<li>You should have <a href="https://github.com/stedolan/jq/wiki/Installation">jq</a> or <a href="https://www.python.org/">Python</a> installed if you want to format the output from an API call.
You can also use <a href="https://github.com/stedolan/jq/wiki/Installation">jq</a> or another program to find public agent IP addresses if you are using an older version of the DC/OS cluster.</li>
</ul>
<p class="message--note"><strong>NOTE: </strong>You can look up the public agent IP address using the DC/OS web-based console, command-line interface, or API calls for DC/OS cluster nodes if DC/OS is deployed on a public cloud provider such as AWS, Google Cloud, or Azure. If DC/OS is installed on an internal network (on-premise) or a private cloud, nodes do not typically have separate public and private IP addresses. For nodes on an internal network or private cloud, the public IP address is often the same as the IP address defined for the server in the DNS namespace.</p>
<h1 id="viewing-public-ip-addresses-in-the-dcos-console"><a class="content__anchor" href="#viewing-public-ip-addresses-in-the-dcos-console" aria-hidden="true"><i data-feather="bookmark"></i></a>Viewing public IP addresses in the DC/OS console</h1>
<p>You can view the public agent IP addresses for the nodes in a cluster interactively from the DC/OS web-based administrative console.</p>
<p>To view public IP addresses using the DC/OS web-based console:</p>
<ol>
<li>
<p>Open a web browser and log in with administrative user name and password.</p>
</li>
<li>
<p>Click <strong>Nodes</strong> to display information about your agent nodes.</p>
</li>
<li>
<p>Check the <strong>Public IP</strong> column to determine the public-facing IP address for the agent node you want to expose.</p>
<p>For example:</p>
 <p>
 <img src="/dcosdocs/mesosphere/dcos/2.2/img/node-public-ip-address.png" alt="Viewing the public-facing IP address for cluster nodes">
 </p>
<p>In most cases, looking up the public-facing IP address for an agent node is sufficient. You can, however, also look up the public IP address for master nodes, if needed. If you need to find the public IP address for a master node, use the <code>dcos node list</code> <a href="#public-ip-cmd">command</a> or the <code>net/v1/nodes</code> <a href="#public-ip-api">API call</a>.</p>
</li>
</ol>
<p><a name="public-ip-cmd"></a></p>
<h1 id="listing-public-ip-addresses-from-the-command-line"><a class="content__anchor" href="#listing-public-ip-addresses-from-the-command-line" aria-hidden="true"><i data-feather="bookmark"></i></a>Listing public IP addresses from the command line</h1>
<p>You can list the public agent IP addresses for the nodes in a cluster interactively or programmatically using the DC/OS core command-line interface (CLI).</p>
<p>To list public IP addresses using the DC/OS CLI:</p>
<ol>
<li>
<p>Open a shell terminal.</p>
</li>
<li>
<p>Run the following command:</p>
<pre><code class="language-bash">dcos node list
</code></pre>
</li>
<li>
<p>Review the command output to locate the public-facing IP address for a node designated as a public agent.</p>
<p>For example, the command returns node information similar to the following:</p>
<pre><code class="language-bash">HOSTNAME         IP       PUBLIC IP(S)                     ID                           TYPE           REGION           ZONE       
10.0.5.46      10.0.5.46   34.223.48.55    ecb5e39c-2d3e-4eea-8c07-af0c4e9e8443-S1  agent (public)    aws/us-west-2  aws/us-west-2d  
10.0.1.112     10.0.1.112                  ecb5e39c-2d3e-4eea-8c07-af0c4e9e8443-S0  agent             aws/us-west-2  aws/us-west-2d  
master.mesos.  10.0.6.157  34.222.201.246  ecb5e39c-2d3e-4eea-8c07-af0c4e9e8443     master (leader)   aws/us-west-2  aws/us-west-2d  
master.mesos.  10.0.7.169  34.223.44.83    N/A                                      master (standby)  aws/us-west-2  N/A             
master.mesos.  10.0.7.38   34.222.181.165  N/A                                      master (standby)  aws/us-west-2  N/A             
</code></pre>
<p>From this output, you can identify the specific public-facing IP addresses to use for both public and private agent nodes and for master nodes.</p>
<p>In this example, there is one public IP address for the public agent:</p>
<ul>
<li>34.223.48.55</li>
</ul>
<p>There are three public IP addresses for the master nodes:</p>
<ul>
<li>34.222.201.246 (leader)</li>
<li>34.223.44.83 (standby)</li>
<li>34.222.181.165 (standby)</li>
</ul>
<p>There are no public-facing IP addresses available for the private agent node.</p>
<p>In most cases, you can use this command to verify both the private and public IP addresses for each node. You should keep in mind, however, that the public and private IP addresses returned might not be accurate if the Edge-LB pool uses virtual networks.</p>
</li>
</ol>
<p><a name="public-ip-api"></a></p>
<h1 id="finding-a-public-ip-address-using-an-api-call"><a class="content__anchor" href="#finding-a-public-ip-address-using-an-api-call" aria-hidden="true"><i data-feather="bookmark"></i></a>Finding a public IP address using an API call</h1>
<p>The DC/OS application programming interface (API) provides the underlying functionality that you can access through the DC/OS web-based administrative console and command-line interface (CLI). In most cases, therefore, you only use the API directly if you are integrating the API call in a custom program or automation script. However, you can retrieve the public IP addresses for public agents directly through calls to the DC/OS application programming interface (API) for networking, if needed.</p>
<p>To find public IP addresses by using the DC/OS API:</p>
<ol>
<li>
<p>Identify the URL for a DC/OS cluster running on a public cloud instance.</p>
</li>
<li>
<p>Use the following REST API <code>net/v1/nodes</code> endpoint to find the public IP of the public agents:</p>
<pre><code class="language-bash">&lt;cluster-url&gt;/net/v1/nodes
</code></pre>
<p>For example, you might issue a call with a cluster URL similar to the following to specify where the DC/OS cluster is running:</p>
<pre><code class="language-bash">http://luxi-sf7-elasticl-u70m3un6kcab-1100943753.us-west-2.elb.amazonaws.com/net/v1/nodes
</code></pre>
</li>
<li>
<p>Review the command output.</p>
<p>If you have a user account that is authorized to access the cluster and retrieve node information, this API call returns node and IP information in an unfiltered format.</p>
</li>
</ol>
<h2 id="looking-up-addresses-from-a-master-node"><a class="content__anchor" href="#looking-up-addresses-from-a-master-node" aria-hidden="true"><i data-feather="bookmark"></i></a>Looking up addresses from a master node</h2>
<p>If you are calling the API endpoint directly, you can find the public IP addresses by using the client URL (<code>cURL</code>) command from a master node. For example, you can find the public-facing IP addresses for public agents using the following cURL command:</p>
<pre><code class="language-bash">curl -skSL -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; -H 'Content-Type: application/json' $(dcos config show core.dcos_url)/net/v1/nodes
</code></pre>
<p>This command sets the authorization token and identifies the cluster URL using the <code>dcos config show</code> commands and returns raw output similar to the following:</p>
<pre><code class="language-bash">[{&quot;updated&quot;:&quot;2019-01-07T22:22:22.171Z&quot;,&quot;public_ips&quot;:[&quot;34.212.37.79&quot;],&quot;private_ip&quot;:&quot;10.0.6.210&quot;,&quot;hostname&quot;:&quot;ip-10-0-6-210&quot;},{&quot;updated&quot;:&quot;2019-01-07T22:22:22.119Z&quot;,&quot;public_ips&quot;:[&quot;52.25.254.97&quot;],&quot;private_ip&quot;:&quot;10.0.6.181&quot;,&quot;hostname&quot;:&quot;ip-10-0-6-181&quot;},{&quot;updated&quot;:&quot;2019-01-07T22:21:09.585Z&quot;,&quot;public_ips&quot;:[&quot;54.218.23.75&quot;],&quot;private_ip&quot;:&quot;10.0.6.148&quot;,&quot;hostname&quot;:&quot;ip-10-0-6-148&quot;},{&quot;updated&quot;:&quot;2019-01-07T22:22:28.582Z&quot;,&quot;public_ips&quot;:[],&quot;private_ip&quot;:&quot;10.0.1.139&quot;,&quot;hostname&quot;:&quot;ip-10-0-1-139&quot;},{&quot;updated&quot;:&quot;2019-01-07T22:22:28.649Z&quot;,&quot;public_ips&quot;:[],&quot;private_ip&quot;:&quot;10.0.0.138&quot;,&quot;hostname&quot;:&quot;ip-10-0-0-138&quot;}]
</code></pre>
<!--You can also execute the cURL command directly on a master node to find the public IP addresses for public agents from a central location using a command similar to the following: 

```bash
curl http://localhost:62080/v1/nodes
```

This command output displays the public IP addresses of the same public agents that are running on the DC/OS cluster. For example: 

    ```bash
    curl http://localhost:62080/v1/nodes
    [{"updated":"2019-01-07T22:22:22.171Z","public_ips":["34.212.37.79"],"private_ip":"10.0.6.210","hostname":"ip-10-0-6-210"},{"updated":"2019-01-07T22:22:22.119Z","public_ips":["52.25.254.97"],"private_ip":"10.0.6.181","hostname":"ip-10-0-6-181"},{"updated":"2019-01-07T22:21:09.585Z","public_ips":["54.218.23.75"],"private_ip":"10.0.6.148","hostname":"ip-10-0-6-148"},{"updated":"2019-01-07T22:22:28.582Z","public_ips":[],"private_ip":"10.0.1.139","hostname":"ip-10-0-1-139"},{"updated":"2019-01-07T22:22:28.649Z","public_ips":[],"private_ip":"10.0.0.138","hostname":"ip-10-0-0-138"}]
    ```

    In both of these examples, there are three public IP addresses, one for each of the public agent nodes:
    - 34.212.37.79
    - 52.25.254.97
    - 54.218.23.75

    As with the previous example, there are no public IP addresses available for the private nodes. 
-->
<h2 id="formatting-api-output"><a class="content__anchor" href="#formatting-api-output" aria-hidden="true"><i data-feather="bookmark"></i></a>Formatting API output</h2>
<p>If you have <code>jq</code> or <code>python</code> installed, you can parse the API output to display node information using more readable JSON formatting. For example, you can execute the API call and pass the output to <code>jq</code> for formatting by running the following command:</p>
<pre><code class="language-bash">curl -skSL -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; -H 'Content-Type: application/json' $(dcos config show core.dcos_url)/net/v1/nodes | jq
</code></pre>
<p>This command returns formatted output for the information retrieved similar to the following:</p>
<pre><code class="language-json">[
  {
    &quot;updated&quot;: &quot;2019-01-07T22:22:22.171Z&quot;,
    &quot;public_ips&quot;: [
      &quot;34.212.37.79&quot;
    ],
    &quot;private_ip&quot;: &quot;10.0.6.210&quot;,
    &quot;hostname&quot;: &quot;ip-10-0-6-210&quot;
  },
  {
    &quot;updated&quot;: &quot;2019-01-07T22:22:22.119Z&quot;,
    &quot;public_ips&quot;: [
      &quot;52.25.254.97&quot;
    ],
    &quot;private_ip&quot;: &quot;10.0.6.181&quot;,
    &quot;hostname&quot;: &quot;ip-10-0-6-181&quot;
  },
  {
    &quot;updated&quot;: &quot;2019-01-07T22:21:09.585Z&quot;,
    &quot;public_ips&quot;: [
      &quot;54.218.23.75&quot;
    ],
    &quot;private_ip&quot;: &quot;10.0.6.148&quot;,
    &quot;hostname&quot;: &quot;ip-10-0-6-148&quot;
  },
  {
    &quot;updated&quot;: &quot;2019-01-07T22:22:28.582Z&quot;,
    &quot;public_ips&quot;: [],
    &quot;private_ip&quot;: &quot;10.0.1.139&quot;,
    &quot;hostname&quot;: &quot;ip-10-0-1-139&quot;
  },
  {
    &quot;updated&quot;: &quot;2019-01-07T22:22:28.649Z&quot;,
    &quot;public_ips&quot;: [],
    &quot;private_ip&quot;: &quot;10.0.0.138&quot;,
    &quot;hostname&quot;: &quot;ip-10-0-0-138&quot;
  }
]
</code></pre>
<p>In these API examples, there are three public IP addresses for the public agent and master nodes:</p>
<ul>
<li>34.212.37.79</li>
<li>52.25.254.97</li>
<li>54.218.23.75</li>
</ul>
<p>As illustrated in the example, there are no public IP addresses available for the private agent nodes. For private agent nodes, the API call returns an empty value for the setting (<code>&quot;public_ips&quot;: []</code>).</p>
<h1 id="executing-a-query-to-return-the-public-ip-addresses"><a class="content__anchor" href="#executing-a-query-to-return-the-public-ip-addresses" aria-hidden="true"><i data-feather="bookmark"></i></a>Executing a query to return the public IP addresses</h1>
<p>If you are working with an older version of the DC/OS cluster, you can find your public agent IP address by executing a <code>jq</code> query in a script or from the command-line in a shell terminal. The following sample script uses a <code>jq</code> query to open a secure shell (SSH) session on the DC/OS cluster to obtain cluster information then queries <a href="https://ifconfig.co/">ifconfig.co</a> to determine the public IP address.</p>
<pre><code class="language-bash">for id in $(dcos node --json | jq --raw-output '.[] | select(.attributes.public_ip == &quot;true&quot;) | .id'); do dcos node ssh --option StrictHostKeyChecking=no --option LogLevel=quiet --master-proxy --mesos-id=$id &quot;curl -s ifconfig.co&quot; ; done 2&gt;/dev/null
</code></pre>
<p>The following is an example that returns the public IP address <code>52.39.29.79</code>:</p>
<pre><code>for id in $(dcos node --json | jq --raw-output '.[] | select(.attributes.public_ip == &quot;true&quot;) | .id'); do dcos node ssh --option StrictHostKeyChecking=no --option LogLevel=quiet --master-proxy --mesos-id=$id &quot;curl -s ifconfig.co&quot; ; done 2&gt;/dev/null
52.39.29.79
</code></pre>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h1"><a href="#before-you-begin">Before you begin</a></li><li class="content__sections-item content__sections-item--h1"><a href="#viewing-public-ip-addresses-in-the-dcos-console">Viewing public IP addresses in the DC/OS console</a></li><li class="content__sections-item content__sections-item--h1"><a href="#listing-public-ip-addresses-from-the-command-line">Listing public IP addresses from the command line</a></li><li class="content__sections-item content__sections-item--h1"><a href="#finding-a-public-ip-address-using-an-api-call">Finding a public IP address using an API call</a></li><li class="content__sections-item content__sections-item--h2"><a href="#looking-up-addresses-from-a-master-node">Looking up addresses from a master node</a></li><li class="content__sections-item content__sections-item--h2"><a href="#formatting-api-output">Formatting API output</a></li><li class="content__sections-item content__sections-item--h1"><a href="#executing-a-query-to-return-the-public-ip-addresses">Executing a query to return the public IP addresses</a></li></ul></div></aside></main></div></div><script src="/assets/js/jquery-3.2.1.js"></script><script src="/assets/js/clipboard.js"></script><script src="/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>