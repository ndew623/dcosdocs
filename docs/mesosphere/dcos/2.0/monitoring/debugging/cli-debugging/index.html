<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width" initial-scale="1" user-scalable="no"><title>Debugging from the DC/OS CLI - D2iQ Docs</title><meta name="description" content="Debugging DC/OS from the command line interface"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><link rel="stylesheet" type="text/css" href="/css/styles.css"><link rel="search" type="application/opensearchdescription+xml" href="/assets/opensearch.xml" title="Search"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"><script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script><script>window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
window.analytics.load("7sgtwqvuai");
window.analytics.page();</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PBJ84KX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PBJ84KX');</script></head><body><div class="layout"><header class="header"><a class="header__drawer"><i class="header__icon" data-feather="menu"></i></a><a class="header__logo" href="/"><img class="header__logo--mobile" src="/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"><img class="header__logo--desktop" src="/assets/D2iQ_Logotype_Color_Positive_Documentation.svg" alt="D2IQ"></a><div class="header__main"><div class="header__dropdown"><img class="header__dropdown-icon" src="/assets/D2IQ_Logotype_Color_Positive.png" alt="D2iQ"><strong>DC/OS Documentation</strong><i data-feather="chevron-down"></i></div><nav class="header__menu"><ul class="header__menu-list"><li class="header__menu-item"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header__menu-item"><a href="/dcosdocs/mesosphere/dcos/services">Services</a></li><li class="header__menu-item"><a href="https://support.d2iq.com">Support</a></li></ul></nav></div><div class="chooser" id="localizer"><div class="chooser-current"><a class="chooser-title">English</a><svg class="chooser-svg" id="localizer-svg"><path class="pointer" d="m 13,6 -5,5 -5,-5 z" fill="#858585"></path></svg></div><ul class="chooser-list" id="localizer-list"><li class="chooser-list-item"><a href="/dcosdocs/mesosphere/dcos/cn/2.0/monitoring/debugging/cli-debugging">中文 (简体)</a></li></ul></div><section class="header__search" role="search"><form class="header__search-form" action="/search/"><input class="header__search-input" id="header-search-input" tabindex="1" type="text" name="q" placeholder="Search"><input type="hidden" name="hFR[scope][0]" value="DC/OS 2.0"><label class="header__search-label" for="header-search-input"><i class="header__icon" data-feather="search"></i></label></form></section></header><div class="header-dropdown"><ul class="header-dropdown__list"><li class="header-dropdown__top-item"><div>DKP</div></li><li class="header-dropdown__item"><a href="/dkp/konvoy">Konvoy</a></li><li class="header-dropdown__item"><a href="/dkp/kommander">Kommander</a></li><li class="header-dropdown__item"><a href="/dkp/dispatch">Dispatch</a></li><li class="header-dropdown__item"><a href="/dkp/kaptain">Kaptain</a></li><li class="header-dropdown__top-item"><div>Mesosphere</div></li><li class="header-dropdown__item header-dropdown__item--active"><a href="/mesosphere/dcos">DC/OS</a></li><li class="header-dropdown__item"><a href="/dcosdocs/mesosphere/dcos/services">DC/OS Services</a></li><li class="header-dropdown__item"><a href="https://support.d2iq.com">Support</a></li></ul></div><div class="layout__sidebar layout__drawer"><section class="sidebar"><header class="sidebar__header"><div class="sidebar__dropdown"><ul><li><a href="/dcosdocs/mesosphere/dcos/2.2/monitoring/debugging/cli-debugging">Mesosphere DC/OS 2.2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.1/monitoring/debugging/cli-debugging">Mesosphere DC/OS 2.1.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/2.0/monitoring/debugging/cli-debugging">Mesosphere DC/OS 2.0</a></li><li><a href="/dcosdocs/mesosphere/dcos/1.13/monitoring/debugging/cli-debugging">Mesosphere DC/OS 1.13</a></li></ul><div class="toggle"><p><span class="title">DC/OS</span><span class="version"> 2.0</span></p><i data-feather="chevron-down"></i></div></div></header><nav class="sidebar_nav" role="navigation"><ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/release-notes/"><i data-feather="chevron-right"></i>Release Notes</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/overview/"><i data-feather="chevron-right"></i>Overview</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/installing/"><i data-feather="chevron-right"></i>Installing</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/gui/"><i data-feather="chevron-right"></i>GUI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/cli/"><i data-feather="chevron-right"></i>CLI</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/administering-clusters/"><i data-feather="chevron-right"></i>Administering Clusters</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/networking/"><i data-feather="chevron-right"></i>Networking</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/security/"><i data-feather="chevron-right"></i>Security</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/storage/"><i data-feather="chevron-right"></i>Storage</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/metrics/"><i data-feather="chevron-right"></i>Metrics</a></li><li class="active"><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/monitoring/"><i data-feather="chevron-right"></i>Monitoring, Logging, and Debugging</a></li><ul><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.0/monitoring/performance-monitoring/"><i data-feather="chevron-right"></i>Performance Monitoring</a></li><li><a class="d1" href="/dcosdocs/mesosphere/dcos/2.0/monitoring/logging/"><i data-feather="chevron-right"></i>Logging</a></li><li class="active"><a class="d1" href="/dcosdocs/mesosphere/dcos/2.0/monitoring/debugging/"><i data-feather="chevron-right"></i>Debugging</a></li><ul><li><a class="d2" href="/dcosdocs/mesosphere/dcos/2.0/monitoring/debugging/gui-debugging/">Debugging from the DC/OS UI</a></li><li class="active active-on"><a class="d2" href="/dcosdocs/mesosphere/dcos/2.0/monitoring/debugging/cli-debugging/">Debugging from the DC/OS CLI</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/2.0/monitoring/debugging/debug-perms/">Granting Access to dcos task exec</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/2.0/monitoring/debugging/task-exec/">Using dcos task exec</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/2.0/monitoring/debugging/stuck-deployment/">Stuck Deployments</a></li><li><a class="d2" href="/dcosdocs/mesosphere/dcos/2.0/monitoring/debugging/slow-docker/">Slow Docker Apps and Deployments</a></li></ul></ul><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/multi-tenancy/"><i data-feather="chevron-right"></i>Multi-Tenancy for DC/OS Clusters</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/hybrid-cloud/"><i data-feather="chevron-right"></i>Hybrid Cloud</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/deploying-jobs/"><i data-feather="chevron-right"></i>Deploying Jobs</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/deploying-services/"><i data-feather="chevron-right"></i>Deploying Services and Pods</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/tutorials/"><i data-feather="chevron-right"></i>Tutorials</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/api/"><i data-feather="chevron-right"></i>API Reference</a></li><li><a class="d0" href="/dcosdocs/mesosphere/dcos/2.0/developing-services/"><i data-feather="chevron-right"></i>Developing DC/OS Services</a></li></ul></nav><footer class="sidebar__footer"><div class="sidebar__footer-links"><a href="https://d2iq.com/terms/">Terms of Service</a><a href="https://d2iq.com/privacy/">Privacy Policy</a></div><a class="sidebar__footer-copyright" href="https://d2iq.com/">&copy; 2022 D2iQ, Inc. All rights reserved.</a></footer></section></div><div class="layout__content" role="main"><main class="content"><div class="content__container content__container--with-sections"><div class="content__header"><div class="content__header__row"><h1 class="content__header-title">Debugging from the DC/OS CLI</h1></div><h4 class="content__header-description">Debugging DC/OS from the command line interface</h4><div class="actions"><ul class="actions__list"><li class="actions__item"><button class="actions__link" onclick="javascript:window.print()"><i class="actions__icon" data-feather="printer"></i><span class="actions__text">Print</span></button></li><li class="actions__item"><a class="actions__link" href="https://github.com/mesosphere/dcos-docs-site/tree/main/pages/dcosdocs/mesosphere/dcos/2.0/monitoring/debugging/cli-debugging/index.md" target="_blank"><i class="actions__icon" data-feather="github"></i><span class="actions__text">Contribute</span></a></li></ul></div></div><article class="content__article"><p>The DC/OS CLI provides commands to debug services that are not deploying or behaving as expected. To see full logs, append <code>--log-level=debug</code> to any DC/OS CLI command. For example, to troubleshoot HDFS package installation, use this command:</p>
<pre><code class="language-bash">dcos -—log-level=&quot;debug&quot; package install hdfs
</code></pre>
<p>For more information about log levels, consult the <a href="/dcosdocs/mesosphere/dcos/2.0/cli/command-reference/">CLI command reference</a> or run <code>dcos --help</code>.</p>
<h1 id="debug-subcommands-for-stuck-deployments"><a class="content__anchor" href="#debug-subcommands-for-stuck-deployments" aria-hidden="true"><i data-feather="bookmark"></i></a>Debug Subcommands for Stuck Deployments</h1>
<p>The DC/OS CLI provides a set of debugging subcommands to troubleshoot a stuck service or pod deployment. You can also use debug services and pods from the <a href="/dcosdocs/mesosphere/dcos/2.0/monitoring/debugging/gui-debugging/">DC/OS UI</a>.</p>
<h2 id="prerequisites"><a class="content__anchor" href="#prerequisites" aria-hidden="true"><i data-feather="bookmark"></i></a>Prerequisites</h2>
<ul>
<li>A DC/OS cluster</li>
<li>The <a href="/dcosdocs/mesosphere/dcos/2.0/cli/install/">DC/OS CLI installed</a></li>
<li>A service or pod that is stuck in deployment</li>
</ul>
<h2 id="sample-application-definitions"><a class="content__anchor" href="#sample-application-definitions" aria-hidden="true"><i data-feather="bookmark"></i></a>Sample application definitions</h2>
<p>If you do not currently have a service or pod that is stuck in deployment, you can use the following two <a href="/dcosdocs/mesosphere/dcos/2.0/deploying-services/creating-services/">Marathon application definitions</a> to test the instructions in this section.</p>
<ul>
<li>
<p>mem-app.json</p>
<p>This service creates an infinite deployment by requesting more memory than is available.</p>
<pre><code class="language-json">{
      &quot;id&quot;: &quot;mem-app&quot;,
      &quot;cmd&quot;: &quot;sleep 1000&quot;,
      &quot;cpus&quot;: 0.1,
      &quot;mem&quot;: 12000,
      &quot;instances&quot;: 3,
      &quot;constraints&quot;: [
              [
                      &quot;hostname&quot;,
                      &quot;UNIQUE&quot;
              ]
      ]
}
</code></pre>
</li>
<li>
<p>stuck-sleep.json</p>
<p>This service requests too many instances.</p>
<pre><code class="language-json">{
        &quot;id&quot;: &quot;stuck-sleep&quot;,
        &quot;cmd&quot;: &quot;sleep 1000&quot;,
        &quot;cpus&quot;: 0.1,
        &quot;mem&quot;: 3000,
        &quot;instances&quot;: 10,
        &quot;constraints&quot;: [
                [
                        &quot;hostname&quot;,
                        &quot;UNIQUE&quot;
                ]
        ]
}
</code></pre>
</li>
</ul>
<h2 id="dcos-marathon-debug-list"><a class="content__anchor" href="#dcos-marathon-debug-list" aria-hidden="true"><i data-feather="bookmark"></i></a>dcos marathon debug list</h2>
<p>The <a href="/dcosdocs/mesosphere/dcos/2.0/cli/command-reference/dcos-marathon/dcos-marathon-debug-list/"><code>dcos marathon debug list</code></a> command shows you all the services that are in a waiting state. This enables you to see only the services that are not running.</p>
<pre><code class="language-bash">dcos marathon debug list

ID            SINCE                     INSTANCES TO LAUNCH  WAITING  PROCESSED OFFERS  UNUSED OFFERS  LAST UNUSED OFFER         LAST USED OFFER           
/mem-app      2017-02-28T19:08:59.547Z  3                    True     13                13             2017-02-28T19:09:35.607Z  ---                       
/stuck-sleep  2017-02-28T19:09:25.56Z   9                    True     8                 7              2017-02-28T19:09:35.608Z  2017-02-28T19:09:25.566Z
</code></pre>
<p>The output of the command shows:</p>
<ul>
<li>How many instances of the service or pod are waiting to launch.</li>
<li>How many Mesos resource offers have been processed.</li>
<li>How many Mesos resource offers are unused</li>
<li>The time when the user created or updated the service or pod.</li>
</ul>
<p>This output can quickly show you which services or pods are stuck in deployment and how long they have been stuck.</p>
<h2 id="dcos-marathon-debug-summary"><a class="content__anchor" href="#dcos-marathon-debug-summary" aria-hidden="true"><i data-feather="bookmark"></i></a>dcos marathon debug summary</h2>
<p>Once you know which services or pods are stuck in deployment, use the <a href="/dcosdocs/mesosphere/dcos/2.0/cli/command-reference/dcos-marathon/dcos-marathon-debug-summary/"><code>dcos marathon debug summary /&lt;app-id&gt;|/&lt;pod-id&gt;</code> command</a> to learn more about a particular stuck service or pod.</p>
<pre><code class="language-bash">dcos marathon debug summary /mem-app

RESOURCE     REQUESTED                 MATCHED  PERCENTAGE  
ROLE         [*]                       1 / 2    50.00%      
CONSTRAINTS  [['hostname', 'UNIQUE']]  1 / 1    100.00%     
CPUS         0.1                       1 / 1    100.00%     
MEM          12000                     0 / 1    0.00%       
DISK         0                         0 / 0    ---         
PORTS        ---                       0 / 0    ---  
</code></pre>
<p>The output of the command shows the resources, what the service or pod requested, how many offers were matched, and the percentage of offers that were matched. This command can quickly show you which resource requests are not being met.</p>
<h2 id="dcos-marathon-debug-details"><a class="content__anchor" href="#dcos-marathon-debug-details" aria-hidden="true"><i data-feather="bookmark"></i></a>dcos marathon debug details</h2>
<p>The <a href="/dcosdocs/mesosphere/dcos/2.0/cli/command-reference/dcos-marathon/dcos-marathon-debug-details/"><code>dcos marathon debug details /&lt;app-id&gt;|/&lt;pod-id&gt;</code> command</a> lets you learn exactly how your service or pod definition should be changed.</p>
<pre><code class="language-bash">dcos marathon debug details /mem-app

HOSTNAME    ROLE  CONSTRAINTS  CPUS  MEM  DISK  PORTS  RECEIVED                  
10.0.0.193   ok        ok       ok    -    ok     ok   2017-02-28T23:25:11.912Z  
10.0.4.126   -         ok       -     -    ok     -    2017-02-28T23:25:11.913Z
</code></pre>
<p>The output of the command shows:</p>
<ul>
<li>Which hosts are running the service or pod</li>
<li>The status of the role, constraints, CPUs, memory, disk, and ports the service or pod has requested</li>
<li>When the last resource offer was received</li>
</ul>
<p>In the example above, you can see that one instance of <code>/mem-app</code> has a status of <code>ok</code> in all categories except memory. The other instance had fewer successful resource matches, with role, CPUs, memory, and ports having no match.</p>
<p>More information about this command can be found in the <a href="/dcosdocs/mesosphere/dcos/2.0/cli/command-reference/dcos-marathon/dcos-marathon-debug-details/">CLI Command Reference section</a>.</p>
</article></div><aside class="content__sections"><div class="content__sections-list-container"><ul class="content__sections-list"><li class="content__sections-item content__sections-item--h1"><a href="#debug-subcommands-for-stuck-deployments">Debug Subcommands for Stuck Deployments</a></li><li class="content__sections-item content__sections-item--h2"><a href="#prerequisites">Prerequisites</a></li><li class="content__sections-item content__sections-item--h2"><a href="#sample-application-definitions">Sample application definitions</a></li><li class="content__sections-item content__sections-item--h2"><a href="#dcos-marathon-debug-list">dcos marathon debug list</a></li><li class="content__sections-item content__sections-item--h2"><a href="#dcos-marathon-debug-summary">dcos marathon debug summary</a></li><li class="content__sections-item content__sections-item--h2"><a href="#dcos-marathon-debug-details">dcos marathon debug details</a></li></ul></div></aside></main></div></div><script src="/assets/js/jquery-3.2.1.js"></script><script src="/assets/js/clipboard.js"></script><script src="/assets/js/prism.js"></script><script src="/js/main.js"></script></body></html>